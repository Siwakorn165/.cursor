"use strict";var Rn=Object.defineProperty;var s=(e,t)=>Rn(e,"name",{value:t,configurable:!0});var v=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ee=v((Rf,St)=>{"use strict";var Q=s(e=>e&&typeof e.message=="string","isErrorLike"),_e=s(e=>{if(!e)return;let t=e.cause;if(typeof t=="function"){let r=e.cause();return Q(r)?r:void 0}else return Q(t)?t:void 0},"getErrorCause"),bt=s((e,t)=>{if(!Q(e))return"";let r=e.stack||"";if(t.has(e))return r+`
causes have become circular...`;let n=_e(e);return n?(t.add(e),r+`
caused by: `+bt(n,t)):r},"_stackWithCauses"),Bn=s(e=>bt(e,new Set),"stackWithCauses"),wt=s((e,t,r)=>{if(!Q(e))return"";let n=r?"":e.message||"";if(t.has(e))return n+": ...";let i=_e(e);if(i){t.add(e);let l=typeof e.cause=="function";return n+(l?"":": ")+wt(i,t,l)}else return n},"_messageWithCauses"),In=s(e=>wt(e,new Set),"messageWithCauses");St.exports={isErrorLike:Q,getErrorCause:_e,stackWithCauses:Bn,messageWithCauses:In}});var Oe=v((If,Et)=>{"use strict";var qn=Symbol("circular-ref-tag"),re=Symbol("pino-raw-err-ref"),_t=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},aggregateErrors:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:s(function(){return this[re]},"get"),set:s(function(e){this[re]=e},"set")}});Object.defineProperty(_t,re,{writable:!0,value:{}});Et.exports={pinoErrProto:_t,pinoErrorSymbols:{seen:qn,rawSymbol:re}}});var vt=v((Cf,xt)=>{"use strict";xt.exports=ve;var{messageWithCauses:Cn,stackWithCauses:Nn,isErrorLike:Ot}=Ee(),{pinoErrProto:Dn,pinoErrorSymbols:Pn}=Oe(),{seen:xe}=Pn,{toString:zn}=Object.prototype;function ve(e){if(!Ot(e))return e;e[xe]=void 0;let t=Object.create(Dn);t.type=zn.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=Cn(e),t.stack=Nn(e),Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(r=>ve(r)));for(let r in e)if(t[r]===void 0){let n=e[r];Ot(n)?r!=="cause"&&!Object.prototype.hasOwnProperty.call(n,xe)&&(t[r]=ve(n)):t[r]=n}return delete e[xe],t.raw=e,t}s(ve,"errSerializer")});var $t=v((Df,Lt)=>{"use strict";Lt.exports=ie;var{isErrorLike:Le}=Ee(),{pinoErrProto:Wn,pinoErrorSymbols:Mn}=Oe(),{seen:ne}=Mn,{toString:Fn}=Object.prototype;function ie(e){if(!Le(e))return e;e[ne]=void 0;let t=Object.create(Wn);t.type=Fn.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=e.message,t.stack=e.stack,Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(r=>ie(r))),Le(e.cause)&&!Object.prototype.hasOwnProperty.call(e.cause,ne)&&(t.cause=ie(e.cause));for(let r in e)if(t[r]===void 0){let n=e[r];Le(n)?Object.prototype.hasOwnProperty.call(n,ne)||(t[r]=ie(n)):t[r]=n}return delete e[ne],t.raw=e,t}s(ie,"errWithCauseSerializer")});var kt=v((zf,Tt)=>{"use strict";Tt.exports={mapHttpRequest:Vn,reqSerializer:jt};var $e=Symbol("pino-raw-req-ref"),At=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:s(function(){return this[$e]},"get"),set:s(function(e){this[$e]=e},"set")}});Object.defineProperty(At,$e,{writable:!0,value:{}});function jt(e){let t=e.info||e.socket,r=Object.create(At);if(r.id=typeof e.id=="function"?e.id():e.id||(e.info?e.info.id:void 0),r.method=e.method,e.originalUrl)r.url=e.originalUrl;else{let n=e.path;r.url=typeof n=="string"?n:e.url?e.url.path||e.url:void 0}return e.query&&(r.query=e.query),e.params&&(r.params=e.params),r.headers=e.headers,r.remoteAddress=t&&t.remoteAddress,r.remotePort=t&&t.remotePort,r.raw=e.raw||e,r}s(jt,"reqSerializer");function Vn(e){return{req:jt(e)}}s(Vn,"mapHttpRequest")});var qt=v((Mf,It)=>{"use strict";It.exports={mapHttpResponse:Kn,resSerializer:Bt};var Ae=Symbol("pino-raw-res-ref"),Rt=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:s(function(){return this[Ae]},"get"),set:s(function(e){this[Ae]=e},"set")}});Object.defineProperty(Rt,Ae,{writable:!0,value:{}});function Bt(e){let t=Object.create(Rt);return t.statusCode=e.headersSent?e.statusCode:null,t.headers=e.getHeaders?e.getHeaders():e._headers,t.raw=e,t}s(Bt,"resSerializer");function Kn(e){return{res:Bt(e)}}s(Kn,"mapHttpResponse")});var Te=v((Vf,Ct)=>{"use strict";var je=vt(),Jn=$t(),se=kt(),oe=qt();Ct.exports={err:je,errWithCause:Jn,mapHttpRequest:se.mapHttpRequest,mapHttpResponse:oe.mapHttpResponse,req:se.reqSerializer,res:oe.resSerializer,wrapErrorSerializer:s(function(t){return t===je?t:s(function(n){return t(je(n))},"wrapErrSerializer")},"wrapErrorSerializer"),wrapRequestSerializer:s(function(t){return t===se.reqSerializer?t:s(function(n){return t(se.reqSerializer(n))},"wrappedReqSerializer")},"wrapRequestSerializer"),wrapResponseSerializer:s(function(t){return t===oe.resSerializer?t:s(function(n){return t(oe.resSerializer(n))},"wrappedResSerializer")},"wrapResponseSerializer")}});var ke=v((Jf,Nt)=>{"use strict";function Un(e,t){return t}s(Un,"noOpPrepareStackTrace");Nt.exports=s(function(){let t=Error.prepareStackTrace;Error.prepareStackTrace=Un;let r=new Error().stack;if(Error.prepareStackTrace=t,!Array.isArray(r))return;let n=r.slice(2),i=[];for(let l of n)l&&i.push(l.getFileName());return i},"getCallers")});var Pt=v((Gf,Dt)=>{"use strict";Dt.exports=Gn;function Gn(e={}){let{ERR_PATHS_MUST_BE_STRINGS:t=s(()=>"fast-redact - Paths must be (non-empty) strings","ERR_PATHS_MUST_BE_STRINGS"),ERR_INVALID_PATH:r=s(n=>`fast-redact \u2013 Invalid path (${n})`,"ERR_INVALID_PATH")}=e;return s(function({paths:i}){i.forEach(l=>{if(typeof l!="string")throw Error(t());try{if(/ã€‡/.test(l))throw Error();let u=(l[0]==="["?"":".")+l.replace(/^\*/,"\u3007").replace(/\.\*/g,".\u3007").replace(/\[\*\]/g,"[\u3007]");if(/\n|\r|;/.test(u)||/\/\*/.test(u))throw Error();Function(`
            'use strict'
            const o = new Proxy({}, { get: () => o, set: () => { throw Error() } });
            const \u3007 = null;
            o${u}
            if ([o${u}].length !== 1) throw Error()`)()}catch{throw Error(r(l))}})},"validate")}s(Gn,"validator")});var le=v((Xf,zt)=>{"use strict";zt.exports=/[^.[\]]+|\[((?:.)*?)\]/g});var Mt=v((Yf,Wt)=>{"use strict";var Hn=le();Wt.exports=Xn;function Xn({paths:e}){let t=[];var r=0;let n=e.reduce(function(i,l,u){var c=l.match(Hn).map(d=>d.replace(/'|"|`/g,""));let y=l[0]==="[";c=c.map(d=>d[0]==="["?d.substr(1,d.length-2):d);let g=c.indexOf("*");if(g>-1){let d=c.slice(0,g),f=d.join("."),b=c.slice(g+1,c.length),a=b.length>0;r++,t.push({before:d,beforeStr:f,after:b,nested:a})}else i[l]={path:c,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(l),leadingBracket:y};return i},{});return{wildcards:t,wcLen:r,secret:n}}s(Xn,"parse")});var Vt=v((Zf,Ft)=>{"use strict";var Yn=le();Ft.exports=Qn;function Qn({secret:e,serialize:t,wcLen:r,strict:n,isCensorFct:i,censorFctTakesPath:l},u){let c=Function("o",`
    if (typeof o !== 'object' || o == null) {
      ${ri(n,t)}
    }
    const { censor, secret } = this
    const originalSecret = {}
    const secretKeys = Object.keys(secret)
    for (var i = 0; i < secretKeys.length; i++) {
      originalSecret[secretKeys[i]] = secret[secretKeys[i]]
    }

    ${Zn(e,i,l)}
    this.compileRestore()
    ${ei(r>0,i,l)}
    this.secret = originalSecret
    ${ti(t)}
  `).bind(u);return c.state=u,t===!1&&(c.restore=y=>u.restore(y)),c}s(Qn,"redactor");function Zn(e,t,r){return Object.keys(e).map(n=>{let{escPath:i,leadingBracket:l,path:u}=e[n],c=l?1:0,y=l?"":".",g=[];for(var d;(d=Yn.exec(n))!==null;){let[,o]=d,{index:p,input:m}=d;p>c&&g.push(m.substring(0,p-(o?0:1)))}var f=g.map(o=>`o${y}${o}`).join(" && ");f.length===0?f+=`o${y}${n} != null`:f+=` && o${y}${n} != null`;let b=`
      switch (true) {
        ${g.reverse().map(o=>`
          case o${y}${o} === censor:
            secret[${i}].circle = ${JSON.stringify(o)}
            break
        `).join(`
`)}
      }
    `,a=r?`val, ${JSON.stringify(u)}`:"val";return`
      if (${f}) {
        const val = o${y}${n}
        if (val === censor) {
          secret[${i}].precensored = true
        } else {
          secret[${i}].val = val
          o${y}${n} = ${t?`censor(${a})`:"censor"}
          ${b}
        }
      }
    `}).join(`
`)}s(Zn,"redactTmpl");function ei(e,t,r){return e===!0?`
    {
      const { wildcards, wcLen, groupRedact, nestedRedact } = this
      for (var i = 0; i < wcLen; i++) {
        const { before, beforeStr, after, nested } = wildcards[i]
        if (nested === true) {
          secret[beforeStr] = secret[beforeStr] || []
          nestedRedact(secret[beforeStr], o, before, after, censor, ${t}, ${r})
        } else secret[beforeStr] = groupRedact(o, before, censor, ${t}, ${r})
      }
    }
  `:""}s(ei,"dynamicRedactTmpl");function ti(e){return e===!1?"return o":`
    var s = this.serialize(o)
    this.restore(o)
    return s
  `}s(ti,"resultTmpl");function ri(e,t){return e===!0?"throw Error('fast-redact: primitives cannot be redacted')":t===!1?"return o":"return this.serialize(o)"}s(ri,"strictImpl")});var Be=v((tu,Ut)=>{"use strict";Ut.exports={groupRedact:ii,groupRestore:ni,nestedRedact:oi,nestedRestore:si};function ni({keys:e,values:t,target:r}){if(r==null||typeof r=="string")return;let n=e.length;for(var i=0;i<n;i++){let l=e[i];r[l]=t[i]}}s(ni,"groupRestore");function ii(e,t,r,n,i){let l=Kt(e,t);if(l==null||typeof l=="string")return{keys:null,values:null,target:l,flat:!0};let u=Object.keys(l),c=u.length,y=t.length,g=i?[...t]:void 0,d=new Array(c);for(var f=0;f<c;f++){let b=u[f];d[f]=l[b],i?(g[y]=b,l[b]=r(l[b],g)):n?l[b]=r(l[b]):l[b]=r}return{keys:u,values:d,target:l,flat:!0}}s(ii,"groupRedact");function si(e){for(let t=0;t<e.length;t++){let{target:r,path:n,value:i}=e[t],l=r;for(let u=n.length-1;u>0;u--)l=l[n[u]];l[n[0]]=i}}s(si,"nestedRestore");function oi(e,t,r,n,i,l,u){let c=Kt(t,r);if(c==null)return;let y=Object.keys(c),g=y.length;for(var d=0;d<g;d++){let f=y[d];li(e,c,f,r,n,i,l,u)}return e}s(oi,"nestedRedact");function Re(e,t){return e!=null?"hasOwn"in Object?Object.hasOwn(e,t):Object.prototype.hasOwnProperty.call(e,t):!1}s(Re,"has");function li(e,t,r,n,i,l,u,c){let y=i.length,g=y-1,d=r;var f=-1,b,a,o,p=null,m=null,_,w,S=!1,E=0,x=0,L=fi();if(o=b=t[r],typeof b=="object"){for(;b!=null&&++f<y&&(x+=1,r=i[f],p=o,!(r!=="*"&&!m&&!(typeof b=="object"&&r in b)));)if(!(r==="*"&&(m==="*"&&(S=!0),m=r,f!==g))){if(m){let A=Object.keys(b);for(var $=0;$<A.length;$++){let O=A[$];if(w=b[O],_=r==="*",S)L=M(L,O,x),E=f,o=Jt(w,E-1,r,n,i,l,u,c,d,b,a,o,_,O,f,g,L,e,t[d],x+1);else if(_||typeof w=="object"&&w!==null&&r in w){if(_?o=w:o=w[r],a=f!==g?o:u?c?l(o,[...n,d,...i]):l(o):l,_){let j=Z(M(L,O,x),o,t[d]);e.push(j),b[O]=a}else if(w[r]!==a)if(a===void 0&&l!==void 0||Re(w,r)&&a===o)L=M(L,O,x);else{L=M(L,O,x);let j=Z(M(L,r,x+1),o,t[d]);e.push(j),w[r]=a}}}m=null}else{if(o=b[r],L=M(L,r,x),a=f!==g?o:u?c?l(o,[...n,d,...i]):l(o):l,!(Re(b,r)&&a===o||a===void 0&&l!==void 0)){let A=Z(L,o,t[d]);e.push(A),b[r]=a}b=b[r]}if(typeof b!="object")break}}}s(li,"specialSet");function Kt(e,t){for(var r=-1,n=t.length,i=e;i!=null&&++r<n;)i=i[t[r]];return i}s(Kt,"get");function Jt(e,t,r,n,i,l,u,c,y,g,d,f,b,a,o,p,m,_,w,S){if(t===0&&(b||typeof e=="object"&&e!==null&&r in e)){if(b?f=e:f=e[r],d=o!==p?f:u?c?l(f,[...n,y,...i]):l(f):l,b){let E=Z(m,f,w);_.push(E),g[a]=d}else if(e[r]!==d){if(!(d===void 0&&l!==void 0||Re(e,r)&&d===f)){let E=Z(M(m,r,S+1),f,w);_.push(E),e[r]=d}}}for(let E in e)typeof e[E]=="object"&&(m=M(m,E,S),Jt(e[E],t-1,r,n,i,l,u,c,y,g,d,f,b,a,o,p,m,_,w,S+1))}s(Jt,"iterateNthLevel");function fi(){return{parent:null,key:null,children:[],depth:0}}s(fi,"tree");function M(e,t,r){if(e.depth===r)return M(e.parent,t,r);var n={parent:e,key:t,depth:r,children:[]};return e.children.push(n),n}s(M,"node");function Z(e,t,r){let n=e,i=[];do i.push(n.key),n=n.parent;while(n.parent!=null);return{path:i,value:t,target:r}}s(Z,"restoreInstr")});var Ht=v((nu,Gt)=>{"use strict";var{groupRestore:ui,nestedRestore:ci}=Be();Gt.exports=ai;function ai(){return s(function(){if(this.restore){this.restore.state.secret=this.secret;return}let{secret:t,wcLen:r}=this,n=Object.keys(t),i=hi(t,n),l=r>0,u=l?{secret:t,groupRestore:ui,nestedRestore:ci}:{secret:t};this.restore=Function("o",di(i,n,l)).bind(u),this.restore.state=u},"compileRestore")}s(ai,"restorer");function hi(e,t){return t.map(r=>{let{circle:n,escPath:i,leadingBracket:l}=e[r],c=n?`o.${n} = secret[${i}].val`:`o${l?"":"."}${r} = secret[${i}].val`,y=`secret[${i}].val = undefined`;return`
      if (secret[${i}].val !== undefined) {
        try { ${c} } catch (e) {}
        ${y}
      }
    `}).join("")}s(hi,"resetTmpl");function di(e,t,r){return`
    const secret = this.secret
    ${r===!0?`
    const keys = Object.keys(secret)
    const len = keys.length
    for (var i = len - 1; i >= ${t.length}; i--) {
      const k = keys[i]
      const o = secret[k]
      if (o) {
        if (o.flat === true) this.groupRestore(o)
        else this.nestedRestore(o)
        secret[k] = null
      }
    }
  `:""}
    ${e}
    return o
  `}s(di,"restoreTmpl")});var Yt=v((su,Xt)=>{"use strict";Xt.exports=yi;function yi(e){let{secret:t,censor:r,compileRestore:n,serialize:i,groupRedact:l,nestedRedact:u,wildcards:c,wcLen:y}=e,g=[{secret:t,censor:r,compileRestore:n}];return i!==!1&&g.push({serialize:i}),y>0&&g.push({groupRedact:l,nestedRedact:u,wildcards:c,wcLen:y}),Object.assign(...g)}s(yi,"state")});var er=v((lu,Zt)=>{"use strict";var Qt=Pt(),gi=Mt(),mi=Vt(),pi=Ht(),{groupRedact:bi,nestedRedact:wi}=Be(),Si=Yt(),_i=le(),Ei=Qt(),Ie=s(e=>e,"noop");Ie.restore=Ie;var Oi="[REDACTED]";qe.rx=_i;qe.validator=Qt;Zt.exports=qe;function qe(e={}){let t=Array.from(new Set(e.paths||[])),r="serialize"in e&&(e.serialize===!1||typeof e.serialize=="function")?e.serialize:JSON.stringify,n=e.remove;if(n===!0&&r!==JSON.stringify)throw Error("fast-redact \u2013 remove option may only be set when serializer is JSON.stringify");let i=n===!0?void 0:"censor"in e?e.censor:Oi,l=typeof i=="function",u=l&&i.length>1;if(t.length===0)return r||Ie;Ei({paths:t,serialize:r,censor:i});let{wildcards:c,wcLen:y,secret:g}=gi({paths:t,censor:i}),d=pi(),f="strict"in e?e.strict:!0;return mi({secret:g,wcLen:y,serialize:r,strict:f,isCensorFct:l,censorFctTakesPath:u},Si({secret:g,censor:i,compileRestore:d,serialize:r,groupRedact:bi,nestedRedact:wi,wildcards:c,wcLen:y}))}s(qe,"fastRedact")});var H=v((uu,tr)=>{"use strict";var xi=Symbol("pino.setLevel"),vi=Symbol("pino.getLevel"),Li=Symbol("pino.levelVal"),$i=Symbol("pino.levelComp"),Ai=Symbol("pino.useLevelLabels"),ji=Symbol("pino.useOnlyCustomLevels"),Ti=Symbol("pino.mixin"),ki=Symbol("pino.lsCache"),Ri=Symbol("pino.chindings"),Bi=Symbol("pino.asJson"),Ii=Symbol("pino.write"),qi=Symbol("pino.redactFmt"),Ci=Symbol("pino.time"),Ni=Symbol("pino.timeSliceIndex"),Di=Symbol("pino.stream"),Pi=Symbol("pino.stringify"),zi=Symbol("pino.stringifySafe"),Wi=Symbol("pino.stringifiers"),Mi=Symbol("pino.end"),Fi=Symbol("pino.formatOpts"),Vi=Symbol("pino.messageKey"),Ki=Symbol("pino.errorKey"),Ji=Symbol("pino.nestedKey"),Ui=Symbol("pino.nestedKeyStr"),Gi=Symbol("pino.mixinMergeStrategy"),Hi=Symbol("pino.msgPrefix"),Xi=Symbol("pino.wildcardFirst"),Yi=Symbol.for("pino.serializers"),Qi=Symbol.for("pino.formatters"),Zi=Symbol.for("pino.hooks"),es=Symbol.for("pino.metadata");tr.exports={setLevelSym:xi,getLevelSym:vi,levelValSym:Li,levelCompSym:$i,useLevelLabelsSym:Ai,mixinSym:Ti,lsCacheSym:ki,chindingsSym:Ri,asJsonSym:Bi,writeSym:Ii,serializersSym:Yi,redactFmtSym:qi,timeSym:Ci,timeSliceIndexSym:Ni,streamSym:Di,stringifySym:Pi,stringifySafeSym:zi,stringifiersSym:Wi,endSym:Mi,formatOptsSym:Fi,messageKeySym:Vi,errorKeySym:Ki,nestedKeySym:Ji,wildcardFirstSym:Xi,needsMetadataGsym:es,useOnlyCustomLevelsSym:ji,formattersSym:Qi,hooksSym:Zi,nestedKeyStrSym:Ui,mixinMergeStrategySym:Gi,msgPrefixSym:Hi}});var De=v((cu,sr)=>{"use strict";var Ne=er(),{redactFmtSym:ts,wildcardFirstSym:fe}=H(),{rx:Ce,validator:rs}=Ne,rr=rs({ERR_PATHS_MUST_BE_STRINGS:s(()=>"pino \u2013 redacted paths must be strings","ERR_PATHS_MUST_BE_STRINGS"),ERR_INVALID_PATH:s(e=>`pino \u2013 redact paths array contains an invalid path (${e})`,"ERR_INVALID_PATH")}),nr="[Redacted]",ir=!1;function ns(e,t){let{paths:r,censor:n}=is(e),i=r.reduce((c,y)=>{Ce.lastIndex=0;let g=Ce.exec(y),d=Ce.exec(y),f=g[1]!==void 0?g[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):g[0];if(f==="*"&&(f=fe),d===null)return c[f]=null,c;if(c[f]===null)return c;let{index:b}=d,a=`${y.substr(b,y.length-1)}`;return c[f]=c[f]||[],f!==fe&&c[f].length===0&&c[f].push(...c[fe]||[]),f===fe&&Object.keys(c).forEach(function(o){c[o]&&c[o].push(a)}),c[f].push(a),c},{}),l={[ts]:Ne({paths:r,censor:n,serialize:t,strict:ir})},u=s((...c)=>t(typeof n=="function"?n(...c):n),"topCensor");return[...Object.keys(i),...Object.getOwnPropertySymbols(i)].reduce((c,y)=>{if(i[y]===null)c[y]=g=>u(g,[y]);else{let g=typeof n=="function"?(d,f)=>n(d,[y,...f]):n;c[y]=Ne({paths:i[y],censor:g,serialize:t,strict:ir})}return c},l)}s(ns,"redaction");function is(e){if(Array.isArray(e))return e={paths:e,censor:nr},rr(e),e;let{paths:t,censor:r=nr,remove:n}=e;if(Array.isArray(t)===!1)throw Error("pino \u2013 redact must contain an array of strings");return n===!0&&(r=void 0),rr({paths:t,censor:r}),{paths:t,censor:r}}s(is,"handle");sr.exports=ns});var lr=v((hu,or)=>{"use strict";var ss=s(()=>"","nullTime"),os=s(()=>`,"time":${Date.now()}`,"epochTime"),ls=s(()=>`,"time":${Math.round(Date.now()/1e3)}`,"unixTime"),fs=s(()=>`,"time":"${new Date(Date.now()).toISOString()}"`,"isoTime");or.exports={nullTime:ss,epochTime:os,unixTime:ls,isoTime:fs}});var ur=v((yu,fr)=>{"use strict";function us(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}s(us,"tryStringify");fr.exports=cs;function cs(e,t,r){var n=r&&r.stringify||us,i=1;if(typeof e=="object"&&e!==null){var l=t.length+i;if(l===1)return e;var u=new Array(l);u[0]=n(e);for(var c=1;c<l;c++)u[c]=n(t[c]);return u.join(" ")}if(typeof e!="string")return e;var y=t.length;if(y===0)return e;for(var g="",d=1-i,f=-1,b=e&&e.length||0,a=0;a<b;){if(e.charCodeAt(a)===37&&a+1<b){switch(f=f>-1?f:0,e.charCodeAt(a+1)){case 100:case 102:if(d>=y||t[d]==null)break;f<a&&(g+=e.slice(f,a)),g+=Number(t[d]),f=a+2,a++;break;case 105:if(d>=y||t[d]==null)break;f<a&&(g+=e.slice(f,a)),g+=Math.floor(Number(t[d])),f=a+2,a++;break;case 79:case 111:case 106:if(d>=y||t[d]===void 0)break;f<a&&(g+=e.slice(f,a));var o=typeof t[d];if(o==="string"){g+="'"+t[d]+"'",f=a+2,a++;break}if(o==="function"){g+=t[d].name||"<anonymous>",f=a+2,a++;break}g+=n(t[d]),f=a+2,a++;break;case 115:if(d>=y)break;f<a&&(g+=e.slice(f,a)),g+=String(t[d]),f=a+2,a++;break;case 37:f<a&&(g+=e.slice(f,a)),g+="%",f=a+2,a++,d--;break}++d}++a}return f===-1?e:(f<b&&(g+=e.slice(f)),g)}s(cs,"format")});var ze=v((mu,Pe)=>{"use strict";if(typeof SharedArrayBuffer<"u"&&typeof Atomics<"u"){let t=function(r){if((r>0&&r<1/0)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(e,0,0,Number(r))};s(t,"sleep");let e=new Int32Array(new SharedArrayBuffer(4));Pe.exports=t}else{let e=function(t){if((t>0&&t<1/0)===!1)throw typeof t!="number"&&typeof t!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");let n=Date.now()+Number(t);for(;n>Date.now(););};s(e,"sleep"),Pe.exports=e}});var pr=v((bu,mr)=>{"use strict";var T=require("fs"),as=require("events"),hs=require("util").inherits,cr=require("path"),Me=ze(),ds=require("assert"),ue=100,ce=Buffer.allocUnsafe(0),ys=16*1024,ar="buffer",hr="utf8",[gs,ms]=(process.versions.node||"0.0").split(".").map(Number),ps=gs>=22&&ms>=7;function dr(e,t){t._opening=!0,t._writing=!0,t._asyncDrainScheduled=!1;function r(l,u){if(l){t._reopening=!1,t._writing=!1,t._opening=!1,t.sync?process.nextTick(()=>{t.listenerCount("error")>0&&t.emit("error",l)}):t.emit("error",l);return}let c=t._reopening;t.fd=u,t.file=e,t._reopening=!1,t._opening=!1,t._writing=!1,t.sync?process.nextTick(()=>t.emit("ready")):t.emit("ready"),!t.destroyed&&(!t._writing&&t._len>t.minLength||t._flushPending?t._actualWrite():c&&process.nextTick(()=>t.emit("drain")))}s(r,"fileOpened");let n=t.append?"a":"w",i=t.mode;if(t.sync)try{t.mkdir&&T.mkdirSync(cr.dirname(e),{recursive:!0});let l=T.openSync(e,n,i);r(null,l)}catch(l){throw r(l),l}else t.mkdir?T.mkdir(cr.dirname(e),{recursive:!0},l=>{if(l)return r(l);T.open(e,n,i,r)}):T.open(e,n,i,r)}s(dr,"openFile");function N(e){if(!(this instanceof N))return new N(e);let{fd:t,dest:r,minLength:n,maxLength:i,maxWrite:l,periodicFlush:u,sync:c,append:y=!0,mkdir:g,retryEAGAIN:d,fsync:f,contentMode:b,mode:a}=e||{};t=t||r,this._len=0,this.fd=-1,this._bufs=[],this._lens=[],this._writing=!1,this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._flushPending=!1,this._hwm=Math.max(n||0,16387),this.file=null,this.destroyed=!1,this.minLength=n||0,this.maxLength=i||0,this.maxWrite=l||ys,this._periodicFlush=u||0,this._periodicFlushTimer=void 0,this.sync=c||!1,this.writable=!0,this._fsync=f||!1,this.append=y||!1,this.mode=a,this.retryEAGAIN=d||(()=>!0),this.mkdir=g||!1;let o,p;if(b===ar)this._writingBuf=ce,this.write=Ss,this.flush=Es,this.flushSync=xs,this._actualWrite=Ls,o=s(()=>T.writeSync(this.fd,this._writingBuf),"fsWriteSync"),p=s(()=>T.write(this.fd,this._writingBuf,this.release),"fsWrite");else if(b===void 0||b===hr)this._writingBuf="",this.write=ws,this.flush=_s,this.flushSync=Os,this._actualWrite=vs,o=s(()=>T.writeSync(this.fd,this._writingBuf,"utf8"),"fsWriteSync"),p=s(()=>T.write(this.fd,this._writingBuf,"utf8",this.release),"fsWrite");else throw new Error(`SonicBoom supports "${hr}" and "${ar}", but passed ${b}`);if(typeof t=="number")this.fd=t,process.nextTick(()=>this.emit("ready"));else if(typeof t=="string")dr(t,this);else throw new Error("SonicBoom supports only file descriptors and files");if(this.minLength>=this.maxWrite)throw new Error(`minLength should be smaller than maxWrite (${this.maxWrite})`);this.release=(m,_)=>{if(m){if((m.code==="EAGAIN"||m.code==="EBUSY")&&this.retryEAGAIN(m,this._writingBuf.length,this._len-this._writingBuf.length))if(this.sync)try{Me(ue),this.release(void 0,0)}catch(E){this.release(E)}else setTimeout(p,ue);else this._writing=!1,this.emit("error",m);return}this.emit("write",_);let w=We(this._writingBuf,this._len,_);if(this._len=w.len,this._writingBuf=w.writingBuf,this._writingBuf.length){if(!this.sync){p();return}try{do{let E=o(),x=We(this._writingBuf,this._len,E);this._len=x.len,this._writingBuf=x.writingBuf}while(this._writingBuf.length)}catch(E){this.release(E);return}}this._fsync&&T.fsyncSync(this.fd);let S=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):S>this.minLength?this._actualWrite():this._ending?S>0?this._actualWrite():(this._writing=!1,ae(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(bs,this)):this.emit("drain"))},this.on("newListener",function(m){m==="drain"&&(this._asyncDrainScheduled=!1)}),this._periodicFlush!==0&&(this._periodicFlushTimer=setInterval(()=>this.flush(null),this._periodicFlush),this._periodicFlushTimer.unref())}s(N,"SonicBoom");function We(e,t,r){return typeof e=="string"&&Buffer.byteLength(e)!==r&&(r=Buffer.from(e).subarray(0,r).toString().length),t=Math.max(t-r,0),e=e.slice(r),{writingBuf:e,len:t}}s(We,"releaseWritingBuf");function bs(e){e.listenerCount("drain")>0&&(e._asyncDrainScheduled=!1,e.emit("drain"))}s(bs,"emitDrain");hs(N,as);function yr(e,t){return e.length===0?ce:e.length===1?e[0]:Buffer.concat(e,t)}s(yr,"mergeBuf");function ws(e){if(this.destroyed)throw new Error("SonicBoom destroyed");let t=this._len+e.length,r=this._bufs;return this.maxLength&&t>this.maxLength?(this.emit("drop",e),this._len<this._hwm):(r.length===0||r[r.length-1].length+e.length>this.maxWrite?r.push(""+e):r[r.length-1]+=e,this._len=t,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}s(ws,"write");function Ss(e){if(this.destroyed)throw new Error("SonicBoom destroyed");let t=this._len+e.length,r=this._bufs,n=this._lens;return this.maxLength&&t>this.maxLength?(this.emit("drop",e),this._len<this._hwm):(r.length===0||n[n.length-1]+e.length>this.maxWrite?(r.push([e]),n.push(e.length)):(r[r.length-1].push(e),n[n.length-1]+=e.length),this._len=t,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}s(Ss,"writeBuffer");function gr(e){this._flushPending=!0;let t=s(()=>{if(this._fsync)this._flushPending=!1,e();else try{T.fsync(this.fd,n=>{this._flushPending=!1,e(n)})}catch(n){e(n)}this.off("error",r)},"onDrain"),r=s(n=>{this._flushPending=!1,e(n),this.off("drain",t)},"onError");this.once("drain",t),this.once("error",r)}s(gr,"callFlushCallbackOnDrain");function _s(e){if(e!=null&&typeof e!="function")throw new Error("flush cb must be a function");if(this.destroyed){let t=new Error("SonicBoom destroyed");if(e){e(t);return}throw t}if(this.minLength<=0){e?.();return}e&&gr.call(this,e),!this._writing&&(this._bufs.length===0&&this._bufs.push(""),this._actualWrite())}s(_s,"flush");function Es(e){if(e!=null&&typeof e!="function")throw new Error("flush cb must be a function");if(this.destroyed){let t=new Error("SonicBoom destroyed");if(e){e(t);return}throw t}if(this.minLength<=0){e?.();return}e&&gr.call(this,e),!this._writing&&(this._bufs.length===0&&(this._bufs.push([]),this._lens.push(0)),this._actualWrite())}s(Es,"flushBuffer");N.prototype.reopen=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(e)});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(e&&(this.file=e),this._reopening=!0,this._writing)return;let t=this.fd;this.once("ready",()=>{t!==this.fd&&T.close(t,r=>{if(r)return this.emit("error",r)})}),dr(this.file,this)};N.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}this._ending||(this._ending=!0,!this._writing&&(this._len>0&&this.fd>=0?this._actualWrite():ae(this)))};function Os(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");let e="";for(;this._bufs.length||e;){e.length<=0&&(e=this._bufs[0]);try{let t=T.writeSync(this.fd,e,"utf8"),r=We(e,this._len,t);e=r.writingBuf,this._len=r.len,e.length<=0&&this._bufs.shift()}catch(t){if((t.code==="EAGAIN"||t.code==="EBUSY")&&!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;Me(ue)}}try{T.fsyncSync(this.fd)}catch{}}s(Os,"flushSync");function xs(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift([this._writingBuf]),this._writingBuf=ce);let e=ce;for(;this._bufs.length||e.length;){e.length<=0&&(e=yr(this._bufs[0],this._lens[0]));try{let t=T.writeSync(this.fd,e);e=e.subarray(t),this._len=Math.max(this._len-t,0),e.length<=0&&(this._bufs.shift(),this._lens.shift())}catch(t){if((t.code==="EAGAIN"||t.code==="EBUSY")&&!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;Me(ue)}}}s(xs,"flushBufferSync");N.prototype.destroy=function(){this.destroyed||ae(this)};function vs(){let e=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf||this._bufs.shift()||"",this.sync)try{let t=T.writeSync(this.fd,this._writingBuf,"utf8");e(null,t)}catch(t){e(t)}else T.write(this.fd,this._writingBuf,"utf8",e)}s(vs,"actualWrite");function Ls(){let e=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf.length?this._writingBuf:yr(this._bufs.shift(),this._lens.shift()),this.sync)try{let t=T.writeSync(this.fd,this._writingBuf);e(null,t)}catch(t){e(t)}else ps&&(this._writingBuf=Buffer.from(this._writingBuf)),T.write(this.fd,this._writingBuf,e)}s(Ls,"actualWriteBuffer");function ae(e){if(e.fd===-1){e.once("ready",ae.bind(null,e));return}e._periodicFlushTimer!==void 0&&clearInterval(e._periodicFlushTimer),e.destroyed=!0,e._bufs=[],e._lens=[],ds(typeof e.fd=="number",`sonic.fd must be a number, got ${typeof e.fd}`);try{T.fsync(e.fd,t)}catch{}function t(){e.fd!==1&&e.fd!==2?T.close(e.fd,r):r()}s(t,"closeWrapped");function r(n){if(n){e.emit("error",n);return}e._ending&&!e._writing&&e.emit("finish"),e.emit("close")}s(r,"done")}s(ae,"actualClose");N.SonicBoom=N;N.default=N;mr.exports=N});var Fe=v((Su,Er)=>{"use strict";var D={exit:[],beforeExit:[]},br={exit:js,beforeExit:Ts},X;function $s(){X===void 0&&(X=new FinalizationRegistry(ks))}s($s,"ensureRegistry");function As(e){D[e].length>0||process.on(e,br[e])}s(As,"install");function wr(e){D[e].length>0||(process.removeListener(e,br[e]),D.exit.length===0&&D.beforeExit.length===0&&(X=void 0))}s(wr,"uninstall");function js(){Sr("exit")}s(js,"onExit");function Ts(){Sr("beforeExit")}s(Ts,"onBeforeExit");function Sr(e){for(let t of D[e]){let r=t.deref(),n=t.fn;r!==void 0&&n(r,e)}D[e]=[]}s(Sr,"callRefs");function ks(e){for(let t of["exit","beforeExit"]){let r=D[t].indexOf(e);D[t].splice(r,r+1),wr(t)}}s(ks,"clear");function _r(e,t,r){if(t===void 0)throw new Error("the object can't be undefined");As(e);let n=new WeakRef(t);n.fn=r,$s(),X.register(t,n),D[e].push(n)}s(_r,"_register");function Rs(e,t){_r("exit",e,t)}s(Rs,"register");function Bs(e,t){_r("beforeExit",e,t)}s(Bs,"registerBeforeExit");function Is(e){if(X!==void 0){X.unregister(e);for(let t of["exit","beforeExit"])D[t]=D[t].filter(r=>{let n=r.deref();return n&&n!==e}),wr(t)}}s(Is,"unregister");Er.exports={register:Rs,registerBeforeExit:Bs,unregister:Is}});var Or=v((Eu,qs)=>{qs.exports={name:"thread-stream",version:"3.1.0",description:"A streaming way to send data to a Node.js Worker Thread",main:"index.js",types:"index.d.ts",dependencies:{"real-require":"^0.2.0"},devDependencies:{"@types/node":"^20.1.0","@types/tap":"^15.0.0","@yao-pkg/pkg":"^5.11.5",desm:"^1.3.0",fastbench:"^1.0.1",husky:"^9.0.6","pino-elasticsearch":"^8.0.0","sonic-boom":"^4.0.1",standard:"^17.0.0",tap:"^16.2.0","ts-node":"^10.8.0",typescript:"^5.3.2","why-is-node-running":"^2.2.2"},scripts:{build:"tsc --noEmit",test:'standard && npm run build && npm run transpile && tap "test/**/*.test.*js" && tap --ts test/*.test.*ts',"test:ci":"standard && npm run transpile && npm run test:ci:js && npm run test:ci:ts","test:ci:js":'tap --no-check-coverage --timeout=120 --coverage-report=lcovonly "test/**/*.test.*js"',"test:ci:ts":'tap --ts --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*ts"',"test:yarn":'npm run transpile && tap "test/**/*.test.js" --no-check-coverage',transpile:"sh ./test/ts/transpile.sh",prepare:"husky install"},standard:{ignore:["test/ts/**/*","test/syntax-error.mjs"]},repository:{type:"git",url:"git+https://github.com/mcollina/thread-stream.git"},keywords:["worker","thread","threads","stream"],author:"Matteo Collina <hello@matteocollina.com>",license:"MIT",bugs:{url:"https://github.com/mcollina/thread-stream/issues"},homepage:"https://github.com/mcollina/thread-stream#readme"}});var vr=v((Ou,xr)=>{"use strict";function Cs(e,t,r,n,i){let l=Date.now()+n,u=Atomics.load(e,t);if(u===r){i(null,"ok");return}let c=u,y=s(g=>{Date.now()>l?i(null,"timed-out"):setTimeout(()=>{c=u,u=Atomics.load(e,t),u===c?y(g>=1e3?1e3:g*2):u===r?i(null,"ok"):i(null,"not-equal")},g)},"check");y(1)}s(Cs,"wait");function Ns(e,t,r,n,i){let l=Date.now()+n,u=Atomics.load(e,t);if(u!==r){i(null,"ok");return}let c=s(y=>{Date.now()>l?i(null,"timed-out"):setTimeout(()=>{u=Atomics.load(e,t),u!==r?i(null,"ok"):c(y>=1e3?1e3:y*2)},y)},"check");c(1)}s(Ns,"waitDiff");xr.exports={wait:Cs,waitDiff:Ns}});var $r=v((vu,Lr)=>{"use strict";Lr.exports={WRITE_INDEX:4,READ_INDEX:8}});var Rr=v((Lu,kr)=>{"use strict";var{version:Ds}=Or(),{EventEmitter:Ps}=require("events"),{Worker:zs}=require("worker_threads"),{join:Ws}=require("path"),{pathToFileURL:Ms}=require("url"),{wait:Fs}=vr(),{WRITE_INDEX:B,READ_INDEX:P}=$r(),Vs=require("buffer"),Ks=require("assert"),h=Symbol("kImpl"),Js=Vs.constants.MAX_STRING_LENGTH,ee=class{static{s(this,"FakeWeakRef")}constructor(t){this._value=t}deref(){return this._value}},de=class{static{s(this,"FakeFinalizationRegistry")}register(){}unregister(){}},Us=process.env.NODE_V8_COVERAGE?de:global.FinalizationRegistry||de,Gs=process.env.NODE_V8_COVERAGE?ee:global.WeakRef||ee,Ar=new Us(e=>{e.exited||e.terminate()});function Hs(e,t){let{filename:r,workerData:n}=t,l=("__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{})["thread-stream-worker"]||Ws(__dirname,"lib","worker.js"),u=new zs(l,{...t.workerOpts,trackUnmanagedFds:!1,workerData:{filename:r.indexOf("file://")===0?r:Ms(r).href,dataBuf:e[h].dataBuf,stateBuf:e[h].stateBuf,workerData:{$context:{threadStreamVersion:Ds},...n}}});return u.stream=new ee(e),u.on("message",Xs),u.on("exit",Tr),Ar.register(e,u),u}s(Hs,"createWorker");function jr(e){Ks(!e[h].sync),e[h].needDrain&&(e[h].needDrain=!1,e.emit("drain"))}s(jr,"drain");function he(e){let t=Atomics.load(e[h].state,B),r=e[h].data.length-t;if(r>0){if(e[h].buf.length===0){e[h].flushing=!1,e[h].ending?Ge(e):e[h].needDrain&&process.nextTick(jr,e);return}let n=e[h].buf.slice(0,r),i=Buffer.byteLength(n);i<=r?(e[h].buf=e[h].buf.slice(r),ye(e,n,he.bind(null,e))):e.flush(()=>{if(!e.destroyed){for(Atomics.store(e[h].state,P,0),Atomics.store(e[h].state,B,0);i>e[h].data.length;)r=r/2,n=e[h].buf.slice(0,r),i=Buffer.byteLength(n);e[h].buf=e[h].buf.slice(r),ye(e,n,he.bind(null,e))}})}else if(r===0){if(t===0&&e[h].buf.length===0)return;e.flush(()=>{Atomics.store(e[h].state,P,0),Atomics.store(e[h].state,B,0),he(e)})}else z(e,new Error("overwritten"))}s(he,"nextFlush");function Xs(e){let t=this.stream.deref();if(t===void 0){this.exited=!0,this.terminate();return}switch(e.code){case"READY":this.stream=new Gs(t),t.flush(()=>{t[h].ready=!0,t.emit("ready")});break;case"ERROR":z(t,e.err);break;case"EVENT":Array.isArray(e.args)?t.emit(e.name,...e.args):t.emit(e.name,e.args);break;case"WARNING":process.emitWarning(e.err);break;default:z(t,new Error("this should not happen: "+e.code))}}s(Xs,"onWorkerMessage");function Tr(e){let t=this.stream.deref();t!==void 0&&(Ar.unregister(t),t.worker.exited=!0,t.worker.off("exit",Tr),z(t,e!==0?new Error("the worker thread exited"):null))}s(Tr,"onWorkerExit");var Ke=class extends Ps{static{s(this,"ThreadStream")}constructor(t={}){if(super(),t.bufferSize<4)throw new Error("bufferSize must at least fit a 4-byte utf-8 char");this[h]={},this[h].stateBuf=new SharedArrayBuffer(128),this[h].state=new Int32Array(this[h].stateBuf),this[h].dataBuf=new SharedArrayBuffer(t.bufferSize||4*1024*1024),this[h].data=Buffer.from(this[h].dataBuf),this[h].sync=t.sync||!1,this[h].ending=!1,this[h].ended=!1,this[h].needDrain=!1,this[h].destroyed=!1,this[h].flushing=!1,this[h].ready=!1,this[h].finished=!1,this[h].errored=null,this[h].closed=!1,this[h].buf="",this.worker=Hs(this,t),this.on("message",(r,n)=>{this.worker.postMessage(r,n)})}write(t){if(this[h].destroyed)return Je(this,new Error("the worker has exited")),!1;if(this[h].ending)return Je(this,new Error("the worker is ending")),!1;if(this[h].flushing&&this[h].buf.length+t.length>=Js)try{Ve(this),this[h].flushing=!0}catch(r){return z(this,r),!1}if(this[h].buf+=t,this[h].sync)try{return Ve(this),!0}catch(r){return z(this,r),!1}return this[h].flushing||(this[h].flushing=!0,setImmediate(he,this)),this[h].needDrain=this[h].data.length-this[h].buf.length-Atomics.load(this[h].state,B)<=0,!this[h].needDrain}end(){this[h].destroyed||(this[h].ending=!0,Ge(this))}flush(t){if(this[h].destroyed){typeof t=="function"&&process.nextTick(t,new Error("the worker has exited"));return}let r=Atomics.load(this[h].state,B);Fs(this[h].state,P,r,1/0,(n,i)=>{if(n){z(this,n),process.nextTick(t,n);return}if(i==="not-equal"){this.flush(t);return}process.nextTick(t)})}flushSync(){this[h].destroyed||(Ve(this),Ue(this))}unref(){this.worker.unref()}ref(){this.worker.ref()}get ready(){return this[h].ready}get destroyed(){return this[h].destroyed}get closed(){return this[h].closed}get writable(){return!this[h].destroyed&&!this[h].ending}get writableEnded(){return this[h].ending}get writableFinished(){return this[h].finished}get writableNeedDrain(){return this[h].needDrain}get writableObjectMode(){return!1}get writableErrored(){return this[h].errored}};function Je(e,t){setImmediate(()=>{e.emit("error",t)})}s(Je,"error");function z(e,t){e[h].destroyed||(e[h].destroyed=!0,t&&(e[h].errored=t,Je(e,t)),e.worker.exited?setImmediate(()=>{e[h].closed=!0,e.emit("close")}):e.worker.terminate().catch(()=>{}).then(()=>{e[h].closed=!0,e.emit("close")}))}s(z,"destroy");function ye(e,t,r){let n=Atomics.load(e[h].state,B),i=Buffer.byteLength(t);return e[h].data.write(t,n),Atomics.store(e[h].state,B,n+i),Atomics.notify(e[h].state,B),r(),!0}s(ye,"write");function Ge(e){if(!(e[h].ended||!e[h].ending||e[h].flushing)){e[h].ended=!0;try{e.flushSync();let t=Atomics.load(e[h].state,P);Atomics.store(e[h].state,B,-1),Atomics.notify(e[h].state,B);let r=0;for(;t!==-1;){if(Atomics.wait(e[h].state,P,t,1e3),t=Atomics.load(e[h].state,P),t===-2){z(e,new Error("end() failed"));return}if(++r===10){z(e,new Error("end() took too long (10s)"));return}}process.nextTick(()=>{e[h].finished=!0,e.emit("finish")})}catch(t){z(e,t)}}}s(Ge,"end");function Ve(e){let t=s(()=>{e[h].ending?Ge(e):e[h].needDrain&&process.nextTick(jr,e)},"cb");for(e[h].flushing=!1;e[h].buf.length!==0;){let r=Atomics.load(e[h].state,B),n=e[h].data.length-r;if(n===0){Ue(e),Atomics.store(e[h].state,P,0),Atomics.store(e[h].state,B,0);continue}else if(n<0)throw new Error("overwritten");let i=e[h].buf.slice(0,n),l=Buffer.byteLength(i);if(l<=n)e[h].buf=e[h].buf.slice(n),ye(e,i,t);else{for(Ue(e),Atomics.store(e[h].state,P,0),Atomics.store(e[h].state,B,0);l>e[h].buf.length;)n=n/2,i=e[h].buf.slice(0,n),l=Buffer.byteLength(i);e[h].buf=e[h].buf.slice(n),ye(e,i,t)}}}s(Ve,"writeSync");function Ue(e){if(e[h].flushing)throw new Error("unable to flush while flushing");let t=Atomics.load(e[h].state,B),r=0;for(;;){let n=Atomics.load(e[h].state,P);if(n===-2)throw Error("_flushSync failed");if(n!==t)Atomics.wait(e[h].state,P,n,1e3);else break;if(++r===10)throw new Error("_flushSync took too long (10s)")}}s(Ue,"flushSync");kr.exports=Ke});var Ye=v((Au,Br)=>{"use strict";var{createRequire:Ys}=require("module"),Qs=ke(),{join:He,isAbsolute:Zs,sep:eo}=require("node:path"),to=ze(),Xe=Fe(),ro=Rr();function no(e){Xe.register(e,so),Xe.registerBeforeExit(e,oo),e.on("close",function(){Xe.unregister(e)})}s(no,"setupOnExit");function io(e,t,r,n){let i=new ro({filename:e,workerData:t,workerOpts:r,sync:n});i.on("ready",l),i.on("close",function(){process.removeListener("exit",u)}),process.on("exit",u);function l(){process.removeListener("exit",u),i.unref(),r.autoEnd!==!1&&no(i)}s(l,"onReady");function u(){i.closed||(i.flushSync(),to(100),i.end())}return s(u,"onExit"),i}s(io,"buildStream");function so(e){e.ref(),e.flushSync(),e.end(),e.once("close",function(){e.unref()})}s(so,"autoEnd");function oo(e){e.flushSync()}s(oo,"flush");function lo(e){let{pipeline:t,targets:r,levels:n,dedupe:i,worker:l={},caller:u=Qs(),sync:c=!1}=e,y={...e.options},g=typeof u=="string"?[u]:u,d="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{},f=e.target;if(f&&r)throw new Error("only one of target or targets can be specified");return r?(f=d["pino-worker"]||He(__dirname,"worker.js"),y.targets=r.filter(a=>a.target).map(a=>({...a,target:b(a.target)})),y.pipelines=r.filter(a=>a.pipeline).map(a=>a.pipeline.map(o=>({...o,level:a.level,target:b(o.target)})))):t&&(f=d["pino-worker"]||He(__dirname,"worker.js"),y.pipelines=[t.map(a=>({...a,target:b(a.target)}))]),n&&(y.levels=n),i&&(y.dedupe=i),y.pinoWillSendConfig=!0,io(b(f),y,l,c);function b(a){if(a=d[a]||a,Zs(a)||a.indexOf("file://")===0)return a;if(a==="pino/file")return He(__dirname,"..","file.js");let o;for(let p of g)try{let m=p==="node:repl"?process.cwd()+eo:p;o=Ys(m).resolve(a);break}catch{continue}if(!o)throw new Error(`unable to determine transport target for "${a}"`);return o}s(b,"fixTarget")}s(lo,"transport");Br.exports=lo});var pe=v((Tu,Vr)=>{"use strict";var Ir=ur(),{mapHttpRequest:fo,mapHttpResponse:uo}=Te(),Ze=pr(),qr=Fe(),{lsCacheSym:co,chindingsSym:Dr,writeSym:Cr,serializersSym:Pr,formatOptsSym:Nr,endSym:ao,stringifiersSym:zr,stringifySym:Wr,stringifySafeSym:et,wildcardFirstSym:Mr,nestedKeySym:ho,formattersSym:Fr,messageKeySym:yo,errorKeySym:go,nestedKeyStrSym:mo,msgPrefixSym:ge}=H(),{isMainThread:po}=require("worker_threads"),bo=Ye();function Y(){}s(Y,"noop");function wo(e,t){if(!t)return r;return s(function(...i){t.call(this,i,r,e)},"hookWrappedLog");function r(n,...i){if(typeof n=="object"){let l=n;n!==null&&(n.method&&n.headers&&n.socket?n=fo(n):typeof n.setHeader=="function"&&(n=uo(n)));let u;l===null&&i.length===0?u=[null]:(l=i.shift(),u=i),typeof this[ge]=="string"&&l!==void 0&&l!==null&&(l=this[ge]+l),this[Cr](n,Ir(l,u,this[Nr]),e)}else{let l=n===void 0?i.shift():n;typeof this[ge]=="string"&&l!==void 0&&l!==null&&(l=this[ge]+l),this[Cr](null,Ir(l,i,this[Nr]),e)}}}s(wo,"genLog");function Qe(e){let t="",r=0,n=!1,i=255,l=e.length;if(l>100)return JSON.stringify(e);for(var u=0;u<l&&i>=32;u++)i=e.charCodeAt(u),(i===34||i===92)&&(t+=e.slice(r,u)+"\\",r=u,n=!0);return n?t+=e.slice(r):t=e,i<32?JSON.stringify(e):'"'+t+'"'}s(Qe,"asString");function So(e,t,r,n){let i=this[Wr],l=this[et],u=this[zr],c=this[ao],y=this[Dr],g=this[Pr],d=this[Fr],f=this[yo],b=this[go],a=this[co][r]+n;a=a+y;let o;d.log&&(e=d.log(e));let p=u[Mr],m="";for(let w in e)if(o=e[w],Object.prototype.hasOwnProperty.call(e,w)&&o!==void 0){g[w]?o=g[w](o):w===b&&g.err&&(o=g.err(o));let S=u[w]||p;switch(typeof o){case"undefined":case"function":continue;case"number":Number.isFinite(o)===!1&&(o=null);case"boolean":S&&(o=S(o));break;case"string":o=(S||Qe)(o);break;default:o=(S||i)(o,l)}if(o===void 0)continue;let E=Qe(w);m+=","+E+":"+o}let _="";if(t!==void 0){o=g[f]?g[f](t):t;let w=u[f]||p;switch(typeof o){case"function":break;case"number":Number.isFinite(o)===!1&&(o=null);case"boolean":w&&(o=w(o)),_=',"'+f+'":'+o;break;case"string":o=(w||Qe)(o),_=',"'+f+'":'+o;break;default:o=(w||i)(o,l),_=',"'+f+'":'+o}}return this[ho]&&m?a+this[mo]+m.slice(1)+"}"+_+c:a+m+_+c}s(So,"asJson");function _o(e,t){let r,n=e[Dr],i=e[Wr],l=e[et],u=e[zr],c=u[Mr],y=e[Pr],g=e[Fr].bindings;t=g(t);for(let d in t)if(r=t[d],(d!=="level"&&d!=="serializers"&&d!=="formatters"&&d!=="customLevels"&&t.hasOwnProperty(d)&&r!==void 0)===!0){if(r=y[d]?y[d](r):r,r=(u[d]||c||i)(r,l),r===void 0)continue;n+=',"'+d+'":'+r}return n}s(_o,"asChindings");function Eo(e){return e.write!==e.constructor.prototype.write}s(Eo,"hasBeenTampered");function me(e){let t=new Ze(e);return t.on("error",r),!e.sync&&po&&(qr.register(t,Oo),t.on("close",function(){qr.unregister(t)})),t;function r(n){if(n.code==="EPIPE"){t.write=Y,t.end=Y,t.flushSync=Y,t.destroy=Y;return}t.removeListener("error",r),t.emit("error",n)}s(r,"filterBrokenPipe")}s(me,"buildSafeSonicBoom");function Oo(e,t){e.destroyed||(t==="beforeExit"?(e.flush(),e.on("drain",function(){e.end()})):e.flushSync())}s(Oo,"autoEnd");function xo(e){return s(function(r,n,i={},l){if(typeof i=="string")l=me({dest:i}),i={};else if(typeof l=="string"){if(i&&i.transport)throw Error("only one of option.transport or stream can be specified");l=me({dest:l})}else if(i instanceof Ze||i.writable||i._writableState)l=i,i={};else if(i.transport){if(i.transport instanceof Ze||i.transport.writable||i.transport._writableState)throw Error("option.transport do not allow stream, please pass to option directly. e.g. pino(transport)");if(i.transport.targets&&i.transport.targets.length&&i.formatters&&typeof i.formatters.level=="function")throw Error("option.transport.targets do not allow custom level formatters");let y;i.customLevels&&(y=i.useOnlyCustomLevels?i.customLevels:Object.assign({},i.levels,i.customLevels)),l=bo({caller:n,...i.transport,levels:y})}if(i=Object.assign({},e,i),i.serializers=Object.assign({},e.serializers,i.serializers),i.formatters=Object.assign({},e.formatters,i.formatters),i.prettyPrint)throw new Error("prettyPrint option is no longer supported, see the pino-pretty package (https://github.com/pinojs/pino-pretty)");let{enabled:u,onChild:c}=i;return u===!1&&(i.level="silent"),c||(i.onChild=Y),l||(Eo(process.stdout)?l=process.stdout:l=me({fd:process.stdout.fd||1})),{opts:i,stream:l}},"normalizeArgs")}s(xo,"createArgsNormalizer");function vo(e,t){try{return JSON.stringify(e)}catch{try{return(t||this[et])(e)}catch{return'"[unable to serialize, circular reference is too complex to analyze]"'}}}s(vo,"stringify");function Lo(e,t,r){return{level:e,bindings:t,log:r}}s(Lo,"buildFormatters");function $o(e){let t=Number(e);return typeof e=="string"&&Number.isFinite(t)?t:e===void 0?1:e}s($o,"normalizeDestFileDescriptor");Vr.exports={noop:Y,buildSafeSonicBoom:me,asChindings:_o,asJson:So,genLog:wo,createArgsNormalizer:xo,stringify:vo,buildFormatters:Lo,normalizeDestFileDescriptor:$o}});var be=v((Ru,Kr)=>{var Ao={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},jo={ASC:"ASC",DESC:"DESC"};Kr.exports={DEFAULT_LEVELS:Ao,SORTING_ORDER:jo}});var nt=v((Bu,Hr)=>{"use strict";var{lsCacheSym:To,levelValSym:tt,useOnlyCustomLevelsSym:ko,streamSym:Ro,formattersSym:Bo,hooksSym:Io,levelCompSym:Jr}=H(),{noop:qo,genLog:K}=pe(),{DEFAULT_LEVELS:W,SORTING_ORDER:Ur}=be(),Gr={fatal:s(e=>{let t=K(W.fatal,e);return function(...r){let n=this[Ro];if(t.call(this,...r),typeof n.flushSync=="function")try{n.flushSync()}catch{}}},"fatal"),error:s(e=>K(W.error,e),"error"),warn:s(e=>K(W.warn,e),"warn"),info:s(e=>K(W.info,e),"info"),debug:s(e=>K(W.debug,e),"debug"),trace:s(e=>K(W.trace,e),"trace")},rt=Object.keys(W).reduce((e,t)=>(e[W[t]]=t,e),{}),Co=Object.keys(rt).reduce((e,t)=>(e[t]='{"level":'+Number(t),e),{});function No(e){let t=e[Bo].level,{labels:r}=e.levels,n={};for(let i in r){let l=t(r[i],Number(i));n[i]=JSON.stringify(l).slice(0,-1)}return e[To]=n,e}s(No,"genLsCache");function Do(e,t){if(t)return!1;switch(e){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}s(Do,"isStandardLevel");function Po(e){let{labels:t,values:r}=this.levels;if(typeof e=="number"){if(t[e]===void 0)throw Error("unknown level value"+e);e=t[e]}if(r[e]===void 0)throw Error("unknown level "+e);let n=this[tt],i=this[tt]=r[e],l=this[ko],u=this[Jr],c=this[Io].logMethod;for(let y in r){if(u(r[y],i)===!1){this[y]=qo;continue}this[y]=Do(y,l)?Gr[y](c):K(r[y],c)}this.emit("level-change",e,i,t[n],n,this)}s(Po,"setLevel");function zo(e){let{levels:t,levelVal:r}=this;return t&&t.labels?t.labels[r]:""}s(zo,"getLevel");function Wo(e){let{values:t}=this.levels,r=t[e];return r!==void 0&&this[Jr](r,this[tt])}s(Wo,"isLevelEnabled");function Mo(e,t,r){return e===Ur.DESC?t<=r:t>=r}s(Mo,"compareLevel");function Fo(e){return typeof e=="string"?Mo.bind(null,e):e}s(Fo,"genLevelComparison");function Vo(e=null,t=!1){let r=e?Object.keys(e).reduce((l,u)=>(l[e[u]]=u,l),{}):null,n=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),t?null:rt,r),i=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),t?null:W,e);return{labels:n,values:i}}s(Vo,"mappings");function Ko(e,t,r){if(typeof e=="number"){if(![].concat(Object.keys(t||{}).map(l=>t[l]),r?[]:Object.keys(rt).map(l=>+l),1/0).includes(e))throw Error(`default level:${e} must be included in custom levels`);return}let n=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),r?null:W,t);if(!(e in n))throw Error(`default level:${e} must be included in custom levels`)}s(Ko,"assertDefaultLevelFound");function Jo(e,t){let{labels:r,values:n}=e;for(let i in t){if(i in n)throw Error("levels cannot be overridden");if(t[i]in r)throw Error("pre-existing level values cannot be used for new levels")}}s(Jo,"assertNoLevelCollisions");function Uo(e){if(typeof e!="function"&&!(typeof e=="string"&&Object.values(Ur).includes(e)))throw new Error('Levels comparison should be one of "ASC", "DESC" or "function" type')}s(Uo,"assertLevelComparison");Hr.exports={initialLsCache:Co,genLsCache:No,levelMethods:Gr,getLevel:zo,setLevel:Po,isLevelEnabled:Wo,mappings:Vo,assertNoLevelCollisions:Jo,assertDefaultLevelFound:Ko,genLevelComparison:Fo,assertLevelComparison:Uo}});var it=v((qu,Xr)=>{"use strict";Xr.exports={version:"9.7.0"}});var fn=v((Nu,ln)=>{"use strict";var{EventEmitter:Go}=require("node:events"),{lsCacheSym:Ho,levelValSym:Xo,setLevelSym:ot,getLevelSym:Yr,chindingsSym:lt,parsedChindingsSym:Yo,mixinSym:Qo,asJsonSym:rn,writeSym:Zo,mixinMergeStrategySym:el,timeSym:tl,timeSliceIndexSym:rl,streamSym:nn,serializersSym:J,formattersSym:st,errorKeySym:nl,messageKeySym:il,useOnlyCustomLevelsSym:sl,needsMetadataGsym:ol,redactFmtSym:ll,stringifySym:fl,formatOptsSym:ul,stringifiersSym:cl,msgPrefixSym:Qr,hooksSym:al}=H(),{getLevel:hl,setLevel:dl,isLevelEnabled:yl,mappings:gl,initialLsCache:ml,genLsCache:pl,assertNoLevelCollisions:bl}=nt(),{asChindings:sn,asJson:wl,buildFormatters:Zr,stringify:en}=pe(),{version:Sl}=it(),_l=De(),El=class{static{s(this,"Pino")}},on={constructor:El,child:Ol,bindings:xl,setBindings:vl,flush:jl,isLevelEnabled:yl,version:Sl,get level(){return this[Yr]()},set level(e){this[ot](e)},get levelVal(){return this[Xo]},set levelVal(e){throw Error("levelVal is read-only")},[Ho]:ml,[Zo]:$l,[rn]:wl,[Yr]:hl,[ot]:dl};Object.setPrototypeOf(on,Go.prototype);ln.exports=function(){return Object.create(on)};var tn=s(e=>e,"resetChildingsFormatter");function Ol(e,t){if(!e)throw Error("missing bindings for child Pino");t=t||{};let r=this[J],n=this[st],i=Object.create(this);if(t.hasOwnProperty("serializers")===!0){i[J]=Object.create(null);for(let d in r)i[J][d]=r[d];let y=Object.getOwnPropertySymbols(r);for(var l=0;l<y.length;l++){let d=y[l];i[J][d]=r[d]}for(let d in t.serializers)i[J][d]=t.serializers[d];let g=Object.getOwnPropertySymbols(t.serializers);for(var u=0;u<g.length;u++){let d=g[u];i[J][d]=t.serializers[d]}}else i[J]=r;if(t.hasOwnProperty("formatters")){let{level:y,bindings:g,log:d}=t.formatters;i[st]=Zr(y||n.level,g||tn,d||n.log)}else i[st]=Zr(n.level,tn,n.log);if(t.hasOwnProperty("customLevels")===!0&&(bl(this.levels,t.customLevels),i.levels=gl(t.customLevels,i[sl]),pl(i)),typeof t.redact=="object"&&t.redact!==null||Array.isArray(t.redact)){i.redact=t.redact;let y=_l(i.redact,en),g={stringify:y[ll]};i[fl]=en,i[cl]=y,i[ul]=g}typeof t.msgPrefix=="string"&&(i[Qr]=(this[Qr]||"")+t.msgPrefix),i[lt]=sn(i,e);let c=t.level||this.level;return i[ot](c),this.onChild(i),i}s(Ol,"child");function xl(){let t=`{${this[lt].substr(1)}}`,r=JSON.parse(t);return delete r.pid,delete r.hostname,r}s(xl,"bindings");function vl(e){let t=sn(this,e);this[lt]=t,delete this[Yo]}s(vl,"setBindings");function Ll(e,t){return Object.assign(t,e)}s(Ll,"defaultMixinMergeStrategy");function $l(e,t,r){let n=this[tl](),i=this[Qo],l=this[nl],u=this[il],c=this[el]||Ll,y,g=this[al].streamWrite;e==null?y={}:e instanceof Error?(y={[l]:e},t===void 0&&(t=e.message)):(y=e,t===void 0&&e[u]===void 0&&e[l]&&(t=e[l].message)),i&&(y=c(y,i(y,r,this)));let d=this[rn](y,t,r,n),f=this[nn];f[ol]===!0&&(f.lastLevel=r,f.lastObj=y,f.lastMsg=t,f.lastTime=n.slice(this[rl]),f.lastLogger=this),f.write(g?g(d):d)}s($l,"write");function Al(){}s(Al,"noop");function jl(e){if(e!=null&&typeof e!="function")throw Error("callback must be a function");let t=this[nn];typeof t.flush=="function"?t.flush(e||Al):e&&e()}s(jl,"flush")});var hn=v((at,an)=>{"use strict";var{hasOwnProperty:te}=Object.prototype,G=ct();G.configure=ct;G.stringify=G;G.default=G;at.stringify=G;at.configure=ct;an.exports=G;var Tl=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function F(e){return e.length<5e3&&!Tl.test(e)?`"${e}"`:JSON.stringify(e)}s(F,"strEscape");function ft(e,t){if(e.length>200||t)return e.sort(t);for(let r=1;r<e.length;r++){let n=e[r],i=r;for(;i!==0&&e[i-1]>n;)e[i]=e[i-1],i--;e[i]=n}return e}s(ft,"sort");var kl=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function ut(e){return kl.call(e)!==void 0&&e.length!==0}s(ut,"isTypedArrayWithEntries");function un(e,t,r){e.length<r&&(r=e.length);let n=t===","?"":" ",i=`"0":${n}${e[0]}`;for(let l=1;l<r;l++)i+=`${t}"${l}":${n}${e[l]}`;return i}s(un,"stringifyTypedArray");function Rl(e){if(te.call(e,"circularValue")){let t=e.circularValue;if(typeof t=="string")return`"${t}"`;if(t==null)return t;if(t===Error||t===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}s(Rl,"getCircularValueOption");function Bl(e){let t;if(te.call(e,"deterministic")&&(t=e.deterministic,typeof t!="boolean"&&typeof t!="function"))throw new TypeError('The "deterministic" argument must be of type boolean or comparator function');return t===void 0?!0:t}s(Bl,"getDeterministicOption");function Il(e,t){let r;if(te.call(e,t)&&(r=e[t],typeof r!="boolean"))throw new TypeError(`The "${t}" argument must be of type boolean`);return r===void 0?!0:r}s(Il,"getBooleanOption");function cn(e,t){let r;if(te.call(e,t)){if(r=e[t],typeof r!="number")throw new TypeError(`The "${t}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${t}" argument must be an integer`);if(r<1)throw new RangeError(`The "${t}" argument must be >= 1`)}return r===void 0?1/0:r}s(cn,"getPositiveIntegerOption");function U(e){return e===1?"1 item":`${e} items`}s(U,"getItemCount");function ql(e){let t=new Set;for(let r of e)(typeof r=="string"||typeof r=="number")&&t.add(String(r));return t}s(ql,"getUniqueReplacerSet");function Cl(e){if(te.call(e,"strict")){let t=e.strict;if(typeof t!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(t)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}s(Cl,"getStrictOption");function ct(e){e={...e};let t=Cl(e);t&&(e.bigint===void 0&&(e.bigint=!1),"circularValue"in e||(e.circularValue=Error));let r=Rl(e),n=Il(e,"bigint"),i=Bl(e),l=typeof i=="function"?i:void 0,u=cn(e,"maximumDepth"),c=cn(e,"maximumBreadth");function y(a,o,p,m,_,w){let S=o[a];switch(typeof S=="object"&&S!==null&&typeof S.toJSON=="function"&&(S=S.toJSON(a)),S=m.call(o,a,S),typeof S){case"string":return F(S);case"object":{if(S===null)return"null";if(p.indexOf(S)!==-1)return r;let E="",x=",",L=w;if(Array.isArray(S)){if(S.length===0)return"[]";if(u<p.length+1)return'"[Array]"';p.push(S),_!==""&&(w+=_,E+=`
${w}`,x=`,
${w}`);let k=Math.min(S.length,c),I=0;for(;I<k-1;I++){let V=y(String(I),S,p,m,_,w);E+=V!==void 0?V:"null",E+=x}let q=y(String(I),S,p,m,_,w);if(E+=q!==void 0?q:"null",S.length-1>c){let V=S.length-c-1;E+=`${x}"... ${U(V)} not stringified"`}return _!==""&&(E+=`
${L}`),p.pop(),`[${E}]`}let $=Object.keys(S),A=$.length;if(A===0)return"{}";if(u<p.length+1)return'"[Object]"';let O="",j="";_!==""&&(w+=_,x=`,
${w}`,O=" ");let R=Math.min(A,c);i&&!ut(S)&&($=ft($,l)),p.push(S);for(let k=0;k<R;k++){let I=$[k],q=y(I,S,p,m,_,w);q!==void 0&&(E+=`${j}${F(I)}:${O}${q}`,j=x)}if(A>c){let k=A-c;E+=`${j}"...":${O}"${U(k)} not stringified"`,j=x}return _!==""&&j.length>1&&(E=`
${w}${E}
${L}`),p.pop(),`{${E}}`}case"number":return isFinite(S)?String(S):t?t(S):"null";case"boolean":return S===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(S);default:return t?t(S):void 0}}s(y,"stringifyFnReplacer");function g(a,o,p,m,_,w){switch(typeof o=="object"&&o!==null&&typeof o.toJSON=="function"&&(o=o.toJSON(a)),typeof o){case"string":return F(o);case"object":{if(o===null)return"null";if(p.indexOf(o)!==-1)return r;let S=w,E="",x=",";if(Array.isArray(o)){if(o.length===0)return"[]";if(u<p.length+1)return'"[Array]"';p.push(o),_!==""&&(w+=_,E+=`
${w}`,x=`,
${w}`);let A=Math.min(o.length,c),O=0;for(;O<A-1;O++){let R=g(String(O),o[O],p,m,_,w);E+=R!==void 0?R:"null",E+=x}let j=g(String(O),o[O],p,m,_,w);if(E+=j!==void 0?j:"null",o.length-1>c){let R=o.length-c-1;E+=`${x}"... ${U(R)} not stringified"`}return _!==""&&(E+=`
${S}`),p.pop(),`[${E}]`}p.push(o);let L="";_!==""&&(w+=_,x=`,
${w}`,L=" ");let $="";for(let A of m){let O=g(A,o[A],p,m,_,w);O!==void 0&&(E+=`${$}${F(A)}:${L}${O}`,$=x)}return _!==""&&$.length>1&&(E=`
${w}${E}
${S}`),p.pop(),`{${E}}`}case"number":return isFinite(o)?String(o):t?t(o):"null";case"boolean":return o===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(o);default:return t?t(o):void 0}}s(g,"stringifyArrayReplacer");function d(a,o,p,m,_){switch(typeof o){case"string":return F(o);case"object":{if(o===null)return"null";if(typeof o.toJSON=="function"){if(o=o.toJSON(a),typeof o!="object")return d(a,o,p,m,_);if(o===null)return"null"}if(p.indexOf(o)!==-1)return r;let w=_;if(Array.isArray(o)){if(o.length===0)return"[]";if(u<p.length+1)return'"[Array]"';p.push(o),_+=m;let O=`
${_}`,j=`,
${_}`,R=Math.min(o.length,c),k=0;for(;k<R-1;k++){let q=d(String(k),o[k],p,m,_);O+=q!==void 0?q:"null",O+=j}let I=d(String(k),o[k],p,m,_);if(O+=I!==void 0?I:"null",o.length-1>c){let q=o.length-c-1;O+=`${j}"... ${U(q)} not stringified"`}return O+=`
${w}`,p.pop(),`[${O}]`}let S=Object.keys(o),E=S.length;if(E===0)return"{}";if(u<p.length+1)return'"[Object]"';_+=m;let x=`,
${_}`,L="",$="",A=Math.min(E,c);ut(o)&&(L+=un(o,x,c),S=S.slice(o.length),A-=o.length,$=x),i&&(S=ft(S,l)),p.push(o);for(let O=0;O<A;O++){let j=S[O],R=d(j,o[j],p,m,_);R!==void 0&&(L+=`${$}${F(j)}: ${R}`,$=x)}if(E>c){let O=E-c;L+=`${$}"...": "${U(O)} not stringified"`,$=x}return $!==""&&(L=`
${_}${L}
${w}`),p.pop(),`{${L}}`}case"number":return isFinite(o)?String(o):t?t(o):"null";case"boolean":return o===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(o);default:return t?t(o):void 0}}s(d,"stringifyIndent");function f(a,o,p){switch(typeof o){case"string":return F(o);case"object":{if(o===null)return"null";if(typeof o.toJSON=="function"){if(o=o.toJSON(a),typeof o!="object")return f(a,o,p);if(o===null)return"null"}if(p.indexOf(o)!==-1)return r;let m="",_=o.length!==void 0;if(_&&Array.isArray(o)){if(o.length===0)return"[]";if(u<p.length+1)return'"[Array]"';p.push(o);let L=Math.min(o.length,c),$=0;for(;$<L-1;$++){let O=f(String($),o[$],p);m+=O!==void 0?O:"null",m+=","}let A=f(String($),o[$],p);if(m+=A!==void 0?A:"null",o.length-1>c){let O=o.length-c-1;m+=`,"... ${U(O)} not stringified"`}return p.pop(),`[${m}]`}let w=Object.keys(o),S=w.length;if(S===0)return"{}";if(u<p.length+1)return'"[Object]"';let E="",x=Math.min(S,c);_&&ut(o)&&(m+=un(o,",",c),w=w.slice(o.length),x-=o.length,E=","),i&&(w=ft(w,l)),p.push(o);for(let L=0;L<x;L++){let $=w[L],A=f($,o[$],p);A!==void 0&&(m+=`${E}${F($)}:${A}`,E=",")}if(S>c){let L=S-c;m+=`${E}"...":"${U(L)} not stringified"`}return p.pop(),`{${m}}`}case"number":return isFinite(o)?String(o):t?t(o):"null";case"boolean":return o===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(o);default:return t?t(o):void 0}}s(f,"stringifySimple");function b(a,o,p){if(arguments.length>1){let m="";if(typeof p=="number"?m=" ".repeat(Math.min(p,10)):typeof p=="string"&&(m=p.slice(0,10)),o!=null){if(typeof o=="function")return y("",{"":a},[],o,m,"");if(Array.isArray(o))return g("",a,[],ql(o),m,"")}if(m.length!==0)return d("",a,[],m,"")}return f("",a,[])}return s(b,"stringify"),b}s(ct,"configure")});var gn=v((zu,yn)=>{"use strict";var ht=Symbol.for("pino.metadata"),{DEFAULT_LEVELS:dn}=be(),Nl=dn.info;function Dl(e,t){let r=0;e=e||[],t=t||{dedupe:!1};let n=Object.create(dn);n.silent=1/0,t.levels&&typeof t.levels=="object"&&Object.keys(t.levels).forEach(f=>{n[f]=t.levels[f]});let i={write:l,add:y,emit:u,flushSync:c,end:g,minLevel:0,streams:[],clone:d,[ht]:!0,streamLevels:n};return Array.isArray(e)?e.forEach(y,i):y.call(i,e),e=null,i;function l(f){let b,a=this.lastLevel,{streams:o}=this,p=0,m;for(let _=zl(o.length,t.dedupe);Ml(_,o.length,t.dedupe);_=Wl(_,t.dedupe))if(b=o[_],b.level<=a){if(p!==0&&p!==b.level)break;if(m=b.stream,m[ht]){let{lastTime:w,lastMsg:S,lastObj:E,lastLogger:x}=this;m.lastLevel=a,m.lastTime=w,m.lastMsg=S,m.lastObj=E,m.lastLogger=x}m.write(f),t.dedupe&&(p=b.level)}else if(!t.dedupe)break}s(l,"write");function u(...f){for(let{stream:b}of this.streams)typeof b.emit=="function"&&b.emit(...f)}s(u,"emit");function c(){for(let{stream:f}of this.streams)typeof f.flushSync=="function"&&f.flushSync()}s(c,"flushSync");function y(f){if(!f)return i;let b=typeof f.write=="function"||f.stream,a=f.write?f:f.stream;if(!b)throw Error("stream object needs to implement either StreamEntry or DestinationStream interface");let{streams:o,streamLevels:p}=this,m;typeof f.levelVal=="number"?m=f.levelVal:typeof f.level=="string"?m=p[f.level]:typeof f.level=="number"?m=f.level:m=Nl;let _={stream:a,level:m,levelVal:void 0,id:r++};return o.unshift(_),o.sort(Pl),this.minLevel=o[0].level,i}s(y,"add");function g(){for(let{stream:f}of this.streams)typeof f.flushSync=="function"&&f.flushSync(),f.end()}s(g,"end");function d(f){let b=new Array(this.streams.length);for(let a=0;a<b.length;a++)b[a]={level:f,stream:this.streams[a].stream};return{write:l,add:y,minLevel:f,streams:b,clone:d,emit:u,flushSync:c,[ht]:!0}}s(d,"clone")}s(Dl,"multistream");function Pl(e,t){return e.level-t.level}s(Pl,"compareByLevel");function zl(e,t){return t?e-1:0}s(zl,"initLoopVar");function Wl(e,t){return t?e-1:e+1}s(Wl,"adjustLoopVar");function Ml(e,t,r){return r?e>=0:e<t}s(Ml,"checkLoopVar");yn.exports=Dl});var jn=v((Mu,C)=>{function we(e){try{return require("path").join(`${process.cwd()}${require("path").sep}dist/src`.replace(/\\/g,"/"),e)}catch{return new Function("p","return new URL(p, import.meta.url).pathname")(e)}}s(we,"pinoBundlerAbsolutePath");globalThis.__bundlerPathsOverrides={...globalThis.__bundlerPathsOverrides||{},"thread-stream-worker":we("./thread-stream-worker.js"),"pino-worker":we("./pino-worker.js"),"pino/file":we("./pino-file.js"),"pino-pretty":we("./pino-pretty.js")};var Fl=require("node:os"),On=Te(),Vl=ke(),Kl=De(),xn=lr(),Jl=fn(),vn=H(),{configure:Ul}=hn(),{assertDefaultLevelFound:Gl,mappings:Ln,genLsCache:Hl,genLevelComparison:Xl,assertLevelComparison:Yl}=nt(),{DEFAULT_LEVELS:$n,SORTING_ORDER:Ql}=be(),{createArgsNormalizer:Zl,asChindings:ef,buildSafeSonicBoom:mn,buildFormatters:tf,stringify:dt,normalizeDestFileDescriptor:pn,noop:rf}=pe(),{version:nf}=it(),{chindingsSym:bn,redactFmtSym:sf,serializersSym:wn,timeSym:of,timeSliceIndexSym:lf,streamSym:ff,stringifySym:Sn,stringifySafeSym:yt,stringifiersSym:_n,setLevelSym:uf,endSym:cf,formatOptsSym:af,messageKeySym:hf,errorKeySym:df,nestedKeySym:yf,mixinSym:gf,levelCompSym:mf,useOnlyCustomLevelsSym:pf,formattersSym:En,hooksSym:bf,nestedKeyStrSym:wf,mixinMergeStrategySym:Sf,msgPrefixSym:_f}=vn,{epochTime:An,nullTime:Ef}=xn,{pid:Of}=process,xf=Fl.hostname(),vf=On.err,Lf={level:"info",levelComparison:Ql.ASC,levels:$n,messageKey:"msg",errorKey:"err",nestedKey:null,enabled:!0,base:{pid:Of,hostname:xf},serializers:Object.assign(Object.create(null),{err:vf}),formatters:Object.assign(Object.create(null),{bindings(e){return e},level(e,t){return{level:t}}}),hooks:{logMethod:void 0,streamWrite:void 0},timestamp:An,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1,depthLimit:5,edgeLimit:100},$f=Zl(Lf),Af=Object.assign(Object.create(null),On);function gt(...e){let t={},{opts:r,stream:n}=$f(t,Vl(),...e);r.level&&typeof r.level=="string"&&$n[r.level.toLowerCase()]!==void 0&&(r.level=r.level.toLowerCase());let{redact:i,crlf:l,serializers:u,timestamp:c,messageKey:y,errorKey:g,nestedKey:d,base:f,name:b,level:a,customLevels:o,levelComparison:p,mixin:m,mixinMergeStrategy:_,useOnlyCustomLevels:w,formatters:S,hooks:E,depthLimit:x,edgeLimit:L,onChild:$,msgPrefix:A}=r,O=Ul({maximumDepth:x,maximumBreadth:L}),j=tf(S.level,S.bindings,S.log),R=dt.bind({[yt]:O}),k=i?Kl(i,R):{},I=i?{stringify:k[sf]}:{stringify:R},q="}"+(l?`\r
`:`
`),V=ef.bind(null,{[bn]:"",[wn]:u,[_n]:k,[Sn]:dt,[yt]:O,[En]:j}),Se="";f!==null&&(b===void 0?Se=V(f):Se=V(Object.assign({},f,{name:b})));let mt=c instanceof Function?c:c?An:Ef,Tn=mt().indexOf(":")+1;if(w&&!o)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(m&&typeof m!="function")throw Error(`Unknown mixin type "${typeof m}" - expected "function"`);if(A&&typeof A!="string")throw Error(`Unknown msgPrefix type "${typeof A}" - expected "string"`);Gl(a,o,w);let pt=Ln(o,w);typeof n.emit=="function"&&n.emit("message",{code:"PINO_CONFIG",config:{levels:pt,messageKey:y,errorKey:g}}),Yl(p);let kn=Xl(p);return Object.assign(t,{levels:pt,[mf]:kn,[pf]:w,[ff]:n,[of]:mt,[lf]:Tn,[Sn]:dt,[yt]:O,[_n]:k,[cf]:q,[af]:I,[hf]:y,[df]:g,[yf]:d,[wf]:d?`,${JSON.stringify(d)}:{`:"",[wn]:u,[gf]:m,[Sf]:_,[bn]:Se,[En]:j,[bf]:E,silent:rf,onChild:$,[_f]:A}),Object.setPrototypeOf(t,Jl()),Hl(t),t[uf](a),t}s(gt,"pino");C.exports=gt;C.exports.destination=(e=process.stdout.fd)=>typeof e=="object"?(e.dest=pn(e.dest||process.stdout.fd),mn(e)):mn({dest:pn(e),minLength:0});C.exports.transport=Ye();C.exports.multistream=gn();C.exports.levels=Ln();C.exports.stdSerializers=Af;C.exports.stdTimeFunctions=Object.assign({},xn);C.exports.symbols=vn;C.exports.version=nf;C.exports.default=gt;C.exports.pino=gt});var jf=jn(),{once:Tf}=require("node:events");module.exports=async function(e={}){let t=Object.assign({},e,{dest:e.destination||1,sync:!1});delete t.destination;let r=jf.destination(t);return await Tf(r,"ready"),r};
