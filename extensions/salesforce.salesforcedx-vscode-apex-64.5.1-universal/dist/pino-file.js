"use strict";var x=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var _e=x((Tf,wt)=>{"use strict";var Y=e=>e&&typeof e.message=="string",Se=e=>{if(!e)return;let t=e.cause;if(typeof t=="function"){let r=e.cause();return Y(r)?r:void 0}else return Y(t)?t:void 0},pt=(e,t)=>{if(!Y(e))return"";let r=e.stack||"";if(t.has(e))return r+`
causes have become circular...`;let n=Se(e);return n?(t.add(e),r+`
caused by: `+pt(n,t)):r},kn=e=>pt(e,new Set),bt=(e,t,r)=>{if(!Y(e))return"";let n=r?"":e.message||"";if(t.has(e))return n+": ...";let i=Se(e);if(i){t.add(e);let o=typeof e.cause=="function";return n+(o?"":": ")+bt(i,t,o)}else return n},Rn=e=>bt(e,new Set);wt.exports={isErrorLike:Y,getErrorCause:Se,stackWithCauses:kn,messageWithCauses:Rn}});var Ee=x((kf,_t)=>{"use strict";var Bn=Symbol("circular-ref-tag"),te=Symbol("pino-raw-err-ref"),St=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},aggregateErrors:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[te]},set:function(e){this[te]=e}}});Object.defineProperty(St,te,{writable:!0,value:{}});_t.exports={pinoErrProto:St,pinoErrorSymbols:{seen:Bn,rawSymbol:te}}});var xt=x((Rf,Ot)=>{"use strict";Ot.exports=xe;var{messageWithCauses:In,stackWithCauses:qn,isErrorLike:Et}=_e(),{pinoErrProto:Cn,pinoErrorSymbols:Nn}=Ee(),{seen:Oe}=Nn,{toString:Dn}=Object.prototype;function xe(e){if(!Et(e))return e;e[Oe]=void 0;let t=Object.create(Cn);t.type=Dn.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=In(e),t.stack=qn(e),Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(r=>xe(r)));for(let r in e)if(t[r]===void 0){let n=e[r];Et(n)?r!=="cause"&&!Object.prototype.hasOwnProperty.call(n,Oe)&&(t[r]=xe(n)):t[r]=n}return delete e[Oe],t.raw=e,t}});var Lt=x((Bf,vt)=>{"use strict";vt.exports=ne;var{isErrorLike:ve}=_e(),{pinoErrProto:Pn,pinoErrorSymbols:zn}=Ee(),{seen:re}=zn,{toString:Wn}=Object.prototype;function ne(e){if(!ve(e))return e;e[re]=void 0;let t=Object.create(Pn);t.type=Wn.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=e.message,t.stack=e.stack,Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(r=>ne(r))),ve(e.cause)&&!Object.prototype.hasOwnProperty.call(e.cause,re)&&(t.cause=ne(e.cause));for(let r in e)if(t[r]===void 0){let n=e[r];ve(n)?Object.prototype.hasOwnProperty.call(n,re)||(t[r]=ne(n)):t[r]=n}return delete e[re],t.raw=e,t}});var Tt=x((If,jt)=>{"use strict";jt.exports={mapHttpRequest:Mn,reqSerializer:At};var Le=Symbol("pino-raw-req-ref"),$t=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[Le]},set:function(e){this[Le]=e}}});Object.defineProperty($t,Le,{writable:!0,value:{}});function At(e){let t=e.info||e.socket,r=Object.create($t);if(r.id=typeof e.id=="function"?e.id():e.id||(e.info?e.info.id:void 0),r.method=e.method,e.originalUrl)r.url=e.originalUrl;else{let n=e.path;r.url=typeof n=="string"?n:e.url?e.url.path||e.url:void 0}return e.query&&(r.query=e.query),e.params&&(r.params=e.params),r.headers=e.headers,r.remoteAddress=t&&t.remoteAddress,r.remotePort=t&&t.remotePort,r.raw=e.raw||e,r}function Mn(e){return{req:At(e)}}});var It=x((qf,Bt)=>{"use strict";Bt.exports={mapHttpResponse:Fn,resSerializer:Rt};var $e=Symbol("pino-raw-res-ref"),kt=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[$e]},set:function(e){this[$e]=e}}});Object.defineProperty(kt,$e,{writable:!0,value:{}});function Rt(e){let t=Object.create(kt);return t.statusCode=e.headersSent?e.statusCode:null,t.headers=e.getHeaders?e.getHeaders():e._headers,t.raw=e,t}function Fn(e){return{res:Rt(e)}}});var je=x((Cf,qt)=>{"use strict";var Ae=xt(),Vn=Lt(),ie=Tt(),se=It();qt.exports={err:Ae,errWithCause:Vn,mapHttpRequest:ie.mapHttpRequest,mapHttpResponse:se.mapHttpResponse,req:ie.reqSerializer,res:se.resSerializer,wrapErrorSerializer:function(t){return t===Ae?t:function(n){return t(Ae(n))}},wrapRequestSerializer:function(t){return t===ie.reqSerializer?t:function(n){return t(ie.reqSerializer(n))}},wrapResponseSerializer:function(t){return t===se.resSerializer?t:function(n){return t(se.resSerializer(n))}}}});var Te=x((Nf,Ct)=>{"use strict";function Kn(e,t){return t}Ct.exports=function(){let t=Error.prepareStackTrace;Error.prepareStackTrace=Kn;let r=new Error().stack;if(Error.prepareStackTrace=t,!Array.isArray(r))return;let n=r.slice(2),i=[];for(let o of n)o&&i.push(o.getFileName());return i}});var Dt=x((Df,Nt)=>{"use strict";Nt.exports=Jn;function Jn(e={}){let{ERR_PATHS_MUST_BE_STRINGS:t=()=>"fast-redact - Paths must be (non-empty) strings",ERR_INVALID_PATH:r=n=>`fast-redact \u2013 Invalid path (${n})`}=e;return function({paths:i}){i.forEach(o=>{if(typeof o!="string")throw Error(t());try{if(/ã€‡/.test(o))throw Error();let f=(o[0]==="["?"":".")+o.replace(/^\*/,"\u3007").replace(/\.\*/g,".\u3007").replace(/\[\*\]/g,"[\u3007]");if(/\n|\r|;/.test(f)||/\/\*/.test(f))throw Error();Function(`
            'use strict'
            const o = new Proxy({}, { get: () => o, set: () => { throw Error() } });
            const \u3007 = null;
            o${f}
            if ([o${f}].length !== 1) throw Error()`)()}catch{throw Error(r(o))}})}}});var oe=x((Pf,Pt)=>{"use strict";Pt.exports=/[^.[\]]+|\[((?:.)*?)\]/g});var Wt=x((zf,zt)=>{"use strict";var Un=oe();zt.exports=Gn;function Gn({paths:e}){let t=[];var r=0;let n=e.reduce(function(i,o,f){var u=o.match(Un).map(h=>h.replace(/'|"|`/g,""));let d=o[0]==="[";u=u.map(h=>h[0]==="["?h.substr(1,h.length-2):h);let y=u.indexOf("*");if(y>-1){let h=u.slice(0,y),l=h.join("."),p=u.slice(y+1,u.length),c=p.length>0;r++,t.push({before:h,beforeStr:l,after:p,nested:c})}else i[o]={path:u,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(o),leadingBracket:d};return i},{});return{wildcards:t,wcLen:r,secret:n}}});var Ft=x((Wf,Mt)=>{"use strict";var Hn=oe();Mt.exports=Xn;function Xn({secret:e,serialize:t,wcLen:r,strict:n,isCensorFct:i,censorFctTakesPath:o},f){let u=Function("o",`
    if (typeof o !== 'object' || o == null) {
      ${ei(n,t)}
    }
    const { censor, secret } = this
    const originalSecret = {}
    const secretKeys = Object.keys(secret)
    for (var i = 0; i < secretKeys.length; i++) {
      originalSecret[secretKeys[i]] = secret[secretKeys[i]]
    }

    ${Yn(e,i,o)}
    this.compileRestore()
    ${Qn(r>0,i,o)}
    this.secret = originalSecret
    ${Zn(t)}
  `).bind(f);return u.state=f,t===!1&&(u.restore=d=>f.restore(d)),u}function Yn(e,t,r){return Object.keys(e).map(n=>{let{escPath:i,leadingBracket:o,path:f}=e[n],u=o?1:0,d=o?"":".",y=[];for(var h;(h=Hn.exec(n))!==null;){let[,s]=h,{index:m,input:g}=h;m>u&&y.push(g.substring(0,m-(s?0:1)))}var l=y.map(s=>`o${d}${s}`).join(" && ");l.length===0?l+=`o${d}${n} != null`:l+=` && o${d}${n} != null`;let p=`
      switch (true) {
        ${y.reverse().map(s=>`
          case o${d}${s} === censor:
            secret[${i}].circle = ${JSON.stringify(s)}
            break
        `).join(`
`)}
      }
    `,c=r?`val, ${JSON.stringify(f)}`:"val";return`
      if (${l}) {
        const val = o${d}${n}
        if (val === censor) {
          secret[${i}].precensored = true
        } else {
          secret[${i}].val = val
          o${d}${n} = ${t?`censor(${c})`:"censor"}
          ${p}
        }
      }
    `}).join(`
`)}function Qn(e,t,r){return e===!0?`
    {
      const { wildcards, wcLen, groupRedact, nestedRedact } = this
      for (var i = 0; i < wcLen; i++) {
        const { before, beforeStr, after, nested } = wildcards[i]
        if (nested === true) {
          secret[beforeStr] = secret[beforeStr] || []
          nestedRedact(secret[beforeStr], o, before, after, censor, ${t}, ${r})
        } else secret[beforeStr] = groupRedact(o, before, censor, ${t}, ${r})
      }
    }
  `:""}function Zn(e){return e===!1?"return o":`
    var s = this.serialize(o)
    this.restore(o)
    return s
  `}function ei(e,t){return e===!0?"throw Error('fast-redact: primitives cannot be redacted')":t===!1?"return o":"return this.serialize(o)"}});var Re=x((Mf,Jt)=>{"use strict";Jt.exports={groupRedact:ri,groupRestore:ti,nestedRedact:ii,nestedRestore:ni};function ti({keys:e,values:t,target:r}){if(r==null||typeof r=="string")return;let n=e.length;for(var i=0;i<n;i++){let o=e[i];r[o]=t[i]}}function ri(e,t,r,n,i){let o=Vt(e,t);if(o==null||typeof o=="string")return{keys:null,values:null,target:o,flat:!0};let f=Object.keys(o),u=f.length,d=t.length,y=i?[...t]:void 0,h=new Array(u);for(var l=0;l<u;l++){let p=f[l];h[l]=o[p],i?(y[d]=p,o[p]=r(o[p],y)):n?o[p]=r(o[p]):o[p]=r}return{keys:f,values:h,target:o,flat:!0}}function ni(e){for(let t=0;t<e.length;t++){let{target:r,path:n,value:i}=e[t],o=r;for(let f=n.length-1;f>0;f--)o=o[n[f]];o[n[0]]=i}}function ii(e,t,r,n,i,o,f){let u=Vt(t,r);if(u==null)return;let d=Object.keys(u),y=d.length;for(var h=0;h<y;h++){let l=d[h];si(e,u,l,r,n,i,o,f)}return e}function ke(e,t){return e!=null?"hasOwn"in Object?Object.hasOwn(e,t):Object.prototype.hasOwnProperty.call(e,t):!1}function si(e,t,r,n,i,o,f,u){let d=i.length,y=d-1,h=r;var l=-1,p,c,s,m=null,g=null,S,b,w=!1,_=0,O=0,v=oi();if(s=p=t[r],typeof p=="object"){for(;p!=null&&++l<d&&(O+=1,r=i[l],m=s,!(r!=="*"&&!g&&!(typeof p=="object"&&r in p)));)if(!(r==="*"&&(g==="*"&&(w=!0),g=r,l!==y))){if(g){let $=Object.keys(p);for(var L=0;L<$.length;L++){let E=$[L];if(b=p[E],S=r==="*",w)v=W(v,E,O),_=l,s=Kt(b,_-1,r,n,i,o,f,u,h,p,c,s,S,E,l,y,v,e,t[h],O+1);else if(S||typeof b=="object"&&b!==null&&r in b){if(S?s=b:s=b[r],c=l!==y?s:f?u?o(s,[...n,h,...i]):o(s):o,S){let A=Q(W(v,E,O),s,t[h]);e.push(A),p[E]=c}else if(b[r]!==c)if(c===void 0&&o!==void 0||ke(b,r)&&c===s)v=W(v,E,O);else{v=W(v,E,O);let A=Q(W(v,r,O+1),s,t[h]);e.push(A),b[r]=c}}}g=null}else{if(s=p[r],v=W(v,r,O),c=l!==y?s:f?u?o(s,[...n,h,...i]):o(s):o,!(ke(p,r)&&c===s||c===void 0&&o!==void 0)){let $=Q(v,s,t[h]);e.push($),p[r]=c}p=p[r]}if(typeof p!="object")break}}}function Vt(e,t){for(var r=-1,n=t.length,i=e;i!=null&&++r<n;)i=i[t[r]];return i}function Kt(e,t,r,n,i,o,f,u,d,y,h,l,p,c,s,m,g,S,b,w){if(t===0&&(p||typeof e=="object"&&e!==null&&r in e)){if(p?l=e:l=e[r],h=s!==m?l:f?u?o(l,[...n,d,...i]):o(l):o,p){let _=Q(g,l,b);S.push(_),y[c]=h}else if(e[r]!==h){if(!(h===void 0&&o!==void 0||ke(e,r)&&h===l)){let _=Q(W(g,r,w+1),l,b);S.push(_),e[r]=h}}}for(let _ in e)typeof e[_]=="object"&&(g=W(g,_,w),Kt(e[_],t-1,r,n,i,o,f,u,d,y,h,l,p,c,s,m,g,S,b,w+1))}function oi(){return{parent:null,key:null,children:[],depth:0}}function W(e,t,r){if(e.depth===r)return W(e.parent,t,r);var n={parent:e,key:t,depth:r,children:[]};return e.children.push(n),n}function Q(e,t,r){let n=e,i=[];do i.push(n.key),n=n.parent;while(n.parent!=null);return{path:i,value:t,target:r}}});var Gt=x((Ff,Ut)=>{"use strict";var{groupRestore:li,nestedRestore:fi}=Re();Ut.exports=ui;function ui(){return function(){if(this.restore){this.restore.state.secret=this.secret;return}let{secret:t,wcLen:r}=this,n=Object.keys(t),i=ci(t,n),o=r>0,f=o?{secret:t,groupRestore:li,nestedRestore:fi}:{secret:t};this.restore=Function("o",ai(i,n,o)).bind(f),this.restore.state=f}}function ci(e,t){return t.map(r=>{let{circle:n,escPath:i,leadingBracket:o}=e[r],u=n?`o.${n} = secret[${i}].val`:`o${o?"":"."}${r} = secret[${i}].val`,d=`secret[${i}].val = undefined`;return`
      if (secret[${i}].val !== undefined) {
        try { ${u} } catch (e) {}
        ${d}
      }
    `}).join("")}function ai(e,t,r){return`
    const secret = this.secret
    ${r===!0?`
    const keys = Object.keys(secret)
    const len = keys.length
    for (var i = len - 1; i >= ${t.length}; i--) {
      const k = keys[i]
      const o = secret[k]
      if (o) {
        if (o.flat === true) this.groupRestore(o)
        else this.nestedRestore(o)
        secret[k] = null
      }
    }
  `:""}
    ${e}
    return o
  `}});var Xt=x((Vf,Ht)=>{"use strict";Ht.exports=hi;function hi(e){let{secret:t,censor:r,compileRestore:n,serialize:i,groupRedact:o,nestedRedact:f,wildcards:u,wcLen:d}=e,y=[{secret:t,censor:r,compileRestore:n}];return i!==!1&&y.push({serialize:i}),d>0&&y.push({groupRedact:o,nestedRedact:f,wildcards:u,wcLen:d}),Object.assign(...y)}});var Zt=x((Kf,Qt)=>{"use strict";var Yt=Dt(),di=Wt(),yi=Ft(),gi=Gt(),{groupRedact:mi,nestedRedact:pi}=Re(),bi=Xt(),wi=oe(),Si=Yt(),Be=e=>e;Be.restore=Be;var _i="[REDACTED]";Ie.rx=wi;Ie.validator=Yt;Qt.exports=Ie;function Ie(e={}){let t=Array.from(new Set(e.paths||[])),r="serialize"in e&&(e.serialize===!1||typeof e.serialize=="function")?e.serialize:JSON.stringify,n=e.remove;if(n===!0&&r!==JSON.stringify)throw Error("fast-redact \u2013 remove option may only be set when serializer is JSON.stringify");let i=n===!0?void 0:"censor"in e?e.censor:_i,o=typeof i=="function",f=o&&i.length>1;if(t.length===0)return r||Be;Si({paths:t,serialize:r,censor:i});let{wildcards:u,wcLen:d,secret:y}=di({paths:t,censor:i}),h=gi(),l="strict"in e?e.strict:!0;return yi({secret:y,wcLen:d,serialize:r,strict:l,isCensorFct:o,censorFctTakesPath:f},bi({secret:y,censor:i,compileRestore:h,serialize:r,groupRedact:mi,nestedRedact:pi,wildcards:u,wcLen:d}))}});var G=x((Jf,er)=>{"use strict";var Ei=Symbol("pino.setLevel"),Oi=Symbol("pino.getLevel"),xi=Symbol("pino.levelVal"),vi=Symbol("pino.levelComp"),Li=Symbol("pino.useLevelLabels"),$i=Symbol("pino.useOnlyCustomLevels"),Ai=Symbol("pino.mixin"),ji=Symbol("pino.lsCache"),Ti=Symbol("pino.chindings"),ki=Symbol("pino.asJson"),Ri=Symbol("pino.write"),Bi=Symbol("pino.redactFmt"),Ii=Symbol("pino.time"),qi=Symbol("pino.timeSliceIndex"),Ci=Symbol("pino.stream"),Ni=Symbol("pino.stringify"),Di=Symbol("pino.stringifySafe"),Pi=Symbol("pino.stringifiers"),zi=Symbol("pino.end"),Wi=Symbol("pino.formatOpts"),Mi=Symbol("pino.messageKey"),Fi=Symbol("pino.errorKey"),Vi=Symbol("pino.nestedKey"),Ki=Symbol("pino.nestedKeyStr"),Ji=Symbol("pino.mixinMergeStrategy"),Ui=Symbol("pino.msgPrefix"),Gi=Symbol("pino.wildcardFirst"),Hi=Symbol.for("pino.serializers"),Xi=Symbol.for("pino.formatters"),Yi=Symbol.for("pino.hooks"),Qi=Symbol.for("pino.metadata");er.exports={setLevelSym:Ei,getLevelSym:Oi,levelValSym:xi,levelCompSym:vi,useLevelLabelsSym:Li,mixinSym:Ai,lsCacheSym:ji,chindingsSym:Ti,asJsonSym:ki,writeSym:Ri,serializersSym:Hi,redactFmtSym:Bi,timeSym:Ii,timeSliceIndexSym:qi,streamSym:Ci,stringifySym:Ni,stringifySafeSym:Di,stringifiersSym:Pi,endSym:zi,formatOptsSym:Wi,messageKeySym:Mi,errorKeySym:Fi,nestedKeySym:Vi,wildcardFirstSym:Gi,needsMetadataGsym:Qi,useOnlyCustomLevelsSym:$i,formattersSym:Xi,hooksSym:Yi,nestedKeyStrSym:Ki,mixinMergeStrategySym:Ji,msgPrefixSym:Ui}});var Ne=x((Uf,ir)=>{"use strict";var Ce=Zt(),{redactFmtSym:Zi,wildcardFirstSym:le}=G(),{rx:qe,validator:es}=Ce,tr=es({ERR_PATHS_MUST_BE_STRINGS:()=>"pino \u2013 redacted paths must be strings",ERR_INVALID_PATH:e=>`pino \u2013 redact paths array contains an invalid path (${e})`}),rr="[Redacted]",nr=!1;function ts(e,t){let{paths:r,censor:n}=rs(e),i=r.reduce((u,d)=>{qe.lastIndex=0;let y=qe.exec(d),h=qe.exec(d),l=y[1]!==void 0?y[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):y[0];if(l==="*"&&(l=le),h===null)return u[l]=null,u;if(u[l]===null)return u;let{index:p}=h,c=`${d.substr(p,d.length-1)}`;return u[l]=u[l]||[],l!==le&&u[l].length===0&&u[l].push(...u[le]||[]),l===le&&Object.keys(u).forEach(function(s){u[s]&&u[s].push(c)}),u[l].push(c),u},{}),o={[Zi]:Ce({paths:r,censor:n,serialize:t,strict:nr})},f=(...u)=>t(typeof n=="function"?n(...u):n);return[...Object.keys(i),...Object.getOwnPropertySymbols(i)].reduce((u,d)=>{if(i[d]===null)u[d]=y=>f(y,[d]);else{let y=typeof n=="function"?(h,l)=>n(h,[d,...l]):n;u[d]=Ce({paths:i[d],censor:y,serialize:t,strict:nr})}return u},o)}function rs(e){if(Array.isArray(e))return e={paths:e,censor:rr},tr(e),e;let{paths:t,censor:r=rr,remove:n}=e;if(Array.isArray(t)===!1)throw Error("pino \u2013 redact must contain an array of strings");return n===!0&&(r=void 0),tr({paths:t,censor:r}),{paths:t,censor:r}}ir.exports=ts});var or=x((Gf,sr)=>{"use strict";var ns=()=>"",is=()=>`,"time":${Date.now()}`,ss=()=>`,"time":${Math.round(Date.now()/1e3)}`,os=()=>`,"time":"${new Date(Date.now()).toISOString()}"`;sr.exports={nullTime:ns,epochTime:is,unixTime:ss,isoTime:os}});var fr=x((Hf,lr)=>{"use strict";function ls(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}lr.exports=fs;function fs(e,t,r){var n=r&&r.stringify||ls,i=1;if(typeof e=="object"&&e!==null){var o=t.length+i;if(o===1)return e;var f=new Array(o);f[0]=n(e);for(var u=1;u<o;u++)f[u]=n(t[u]);return f.join(" ")}if(typeof e!="string")return e;var d=t.length;if(d===0)return e;for(var y="",h=1-i,l=-1,p=e&&e.length||0,c=0;c<p;){if(e.charCodeAt(c)===37&&c+1<p){switch(l=l>-1?l:0,e.charCodeAt(c+1)){case 100:case 102:if(h>=d||t[h]==null)break;l<c&&(y+=e.slice(l,c)),y+=Number(t[h]),l=c+2,c++;break;case 105:if(h>=d||t[h]==null)break;l<c&&(y+=e.slice(l,c)),y+=Math.floor(Number(t[h])),l=c+2,c++;break;case 79:case 111:case 106:if(h>=d||t[h]===void 0)break;l<c&&(y+=e.slice(l,c));var s=typeof t[h];if(s==="string"){y+="'"+t[h]+"'",l=c+2,c++;break}if(s==="function"){y+=t[h].name||"<anonymous>",l=c+2,c++;break}y+=n(t[h]),l=c+2,c++;break;case 115:if(h>=d)break;l<c&&(y+=e.slice(l,c)),y+=String(t[h]),l=c+2,c++;break;case 37:l<c&&(y+=e.slice(l,c)),y+="%",l=c+2,c++,h--;break}++h}++c}return l===-1?e:(l<p&&(y+=e.slice(l)),y)}});var Pe=x((Xf,De)=>{"use strict";if(typeof SharedArrayBuffer<"u"&&typeof Atomics<"u"){let t=function(r){if((r>0&&r<1/0)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(e,0,0,Number(r))},e=new Int32Array(new SharedArrayBuffer(4));De.exports=t}else{let e=function(t){if((t>0&&t<1/0)===!1)throw typeof t!="number"&&typeof t!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");let n=Date.now()+Number(t);for(;n>Date.now(););};De.exports=e}});var mr=x((Yf,gr)=>{"use strict";var j=require("fs"),us=require("events"),cs=require("util").inherits,ur=require("path"),We=Pe(),as=require("assert"),fe=100,ue=Buffer.allocUnsafe(0),hs=16*1024,cr="buffer",ar="utf8",[ds,ys]=(process.versions.node||"0.0").split(".").map(Number),gs=ds>=22&&ys>=7;function hr(e,t){t._opening=!0,t._writing=!0,t._asyncDrainScheduled=!1;function r(o,f){if(o){t._reopening=!1,t._writing=!1,t._opening=!1,t.sync?process.nextTick(()=>{t.listenerCount("error")>0&&t.emit("error",o)}):t.emit("error",o);return}let u=t._reopening;t.fd=f,t.file=e,t._reopening=!1,t._opening=!1,t._writing=!1,t.sync?process.nextTick(()=>t.emit("ready")):t.emit("ready"),!t.destroyed&&(!t._writing&&t._len>t.minLength||t._flushPending?t._actualWrite():u&&process.nextTick(()=>t.emit("drain")))}let n=t.append?"a":"w",i=t.mode;if(t.sync)try{t.mkdir&&j.mkdirSync(ur.dirname(e),{recursive:!0});let o=j.openSync(e,n,i);r(null,o)}catch(o){throw r(o),o}else t.mkdir?j.mkdir(ur.dirname(e),{recursive:!0},o=>{if(o)return r(o);j.open(e,n,i,r)}):j.open(e,n,i,r)}function C(e){if(!(this instanceof C))return new C(e);let{fd:t,dest:r,minLength:n,maxLength:i,maxWrite:o,periodicFlush:f,sync:u,append:d=!0,mkdir:y,retryEAGAIN:h,fsync:l,contentMode:p,mode:c}=e||{};t=t||r,this._len=0,this.fd=-1,this._bufs=[],this._lens=[],this._writing=!1,this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._flushPending=!1,this._hwm=Math.max(n||0,16387),this.file=null,this.destroyed=!1,this.minLength=n||0,this.maxLength=i||0,this.maxWrite=o||hs,this._periodicFlush=f||0,this._periodicFlushTimer=void 0,this.sync=u||!1,this.writable=!0,this._fsync=l||!1,this.append=d||!1,this.mode=c,this.retryEAGAIN=h||(()=>!0),this.mkdir=y||!1;let s,m;if(p===cr)this._writingBuf=ue,this.write=bs,this.flush=Ss,this.flushSync=Es,this._actualWrite=xs,s=()=>j.writeSync(this.fd,this._writingBuf),m=()=>j.write(this.fd,this._writingBuf,this.release);else if(p===void 0||p===ar)this._writingBuf="",this.write=ps,this.flush=ws,this.flushSync=_s,this._actualWrite=Os,s=()=>j.writeSync(this.fd,this._writingBuf,"utf8"),m=()=>j.write(this.fd,this._writingBuf,"utf8",this.release);else throw new Error(`SonicBoom supports "${ar}" and "${cr}", but passed ${p}`);if(typeof t=="number")this.fd=t,process.nextTick(()=>this.emit("ready"));else if(typeof t=="string")hr(t,this);else throw new Error("SonicBoom supports only file descriptors and files");if(this.minLength>=this.maxWrite)throw new Error(`minLength should be smaller than maxWrite (${this.maxWrite})`);this.release=(g,S)=>{if(g){if((g.code==="EAGAIN"||g.code==="EBUSY")&&this.retryEAGAIN(g,this._writingBuf.length,this._len-this._writingBuf.length))if(this.sync)try{We(fe),this.release(void 0,0)}catch(_){this.release(_)}else setTimeout(m,fe);else this._writing=!1,this.emit("error",g);return}this.emit("write",S);let b=ze(this._writingBuf,this._len,S);if(this._len=b.len,this._writingBuf=b.writingBuf,this._writingBuf.length){if(!this.sync){m();return}try{do{let _=s(),O=ze(this._writingBuf,this._len,_);this._len=O.len,this._writingBuf=O.writingBuf}while(this._writingBuf.length)}catch(_){this.release(_);return}}this._fsync&&j.fsyncSync(this.fd);let w=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):w>this.minLength?this._actualWrite():this._ending?w>0?this._actualWrite():(this._writing=!1,ce(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(ms,this)):this.emit("drain"))},this.on("newListener",function(g){g==="drain"&&(this._asyncDrainScheduled=!1)}),this._periodicFlush!==0&&(this._periodicFlushTimer=setInterval(()=>this.flush(null),this._periodicFlush),this._periodicFlushTimer.unref())}function ze(e,t,r){return typeof e=="string"&&Buffer.byteLength(e)!==r&&(r=Buffer.from(e).subarray(0,r).toString().length),t=Math.max(t-r,0),e=e.slice(r),{writingBuf:e,len:t}}function ms(e){e.listenerCount("drain")>0&&(e._asyncDrainScheduled=!1,e.emit("drain"))}cs(C,us);function dr(e,t){return e.length===0?ue:e.length===1?e[0]:Buffer.concat(e,t)}function ps(e){if(this.destroyed)throw new Error("SonicBoom destroyed");let t=this._len+e.length,r=this._bufs;return this.maxLength&&t>this.maxLength?(this.emit("drop",e),this._len<this._hwm):(r.length===0||r[r.length-1].length+e.length>this.maxWrite?r.push(""+e):r[r.length-1]+=e,this._len=t,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function bs(e){if(this.destroyed)throw new Error("SonicBoom destroyed");let t=this._len+e.length,r=this._bufs,n=this._lens;return this.maxLength&&t>this.maxLength?(this.emit("drop",e),this._len<this._hwm):(r.length===0||n[n.length-1]+e.length>this.maxWrite?(r.push([e]),n.push(e.length)):(r[r.length-1].push(e),n[n.length-1]+=e.length),this._len=t,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function yr(e){this._flushPending=!0;let t=()=>{if(this._fsync)this._flushPending=!1,e();else try{j.fsync(this.fd,n=>{this._flushPending=!1,e(n)})}catch(n){e(n)}this.off("error",r)},r=n=>{this._flushPending=!1,e(n),this.off("drain",t)};this.once("drain",t),this.once("error",r)}function ws(e){if(e!=null&&typeof e!="function")throw new Error("flush cb must be a function");if(this.destroyed){let t=new Error("SonicBoom destroyed");if(e){e(t);return}throw t}if(this.minLength<=0){e?.();return}e&&yr.call(this,e),!this._writing&&(this._bufs.length===0&&this._bufs.push(""),this._actualWrite())}function Ss(e){if(e!=null&&typeof e!="function")throw new Error("flush cb must be a function");if(this.destroyed){let t=new Error("SonicBoom destroyed");if(e){e(t);return}throw t}if(this.minLength<=0){e?.();return}e&&yr.call(this,e),!this._writing&&(this._bufs.length===0&&(this._bufs.push([]),this._lens.push(0)),this._actualWrite())}C.prototype.reopen=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(e)});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(e&&(this.file=e),this._reopening=!0,this._writing)return;let t=this.fd;this.once("ready",()=>{t!==this.fd&&j.close(t,r=>{if(r)return this.emit("error",r)})}),hr(this.file,this)};C.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}this._ending||(this._ending=!0,!this._writing&&(this._len>0&&this.fd>=0?this._actualWrite():ce(this)))};function _s(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");let e="";for(;this._bufs.length||e;){e.length<=0&&(e=this._bufs[0]);try{let t=j.writeSync(this.fd,e,"utf8"),r=ze(e,this._len,t);e=r.writingBuf,this._len=r.len,e.length<=0&&this._bufs.shift()}catch(t){if((t.code==="EAGAIN"||t.code==="EBUSY")&&!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;We(fe)}}try{j.fsyncSync(this.fd)}catch{}}function Es(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift([this._writingBuf]),this._writingBuf=ue);let e=ue;for(;this._bufs.length||e.length;){e.length<=0&&(e=dr(this._bufs[0],this._lens[0]));try{let t=j.writeSync(this.fd,e);e=e.subarray(t),this._len=Math.max(this._len-t,0),e.length<=0&&(this._bufs.shift(),this._lens.shift())}catch(t){if((t.code==="EAGAIN"||t.code==="EBUSY")&&!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;We(fe)}}}C.prototype.destroy=function(){this.destroyed||ce(this)};function Os(){let e=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf||this._bufs.shift()||"",this.sync)try{let t=j.writeSync(this.fd,this._writingBuf,"utf8");e(null,t)}catch(t){e(t)}else j.write(this.fd,this._writingBuf,"utf8",e)}function xs(){let e=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf.length?this._writingBuf:dr(this._bufs.shift(),this._lens.shift()),this.sync)try{let t=j.writeSync(this.fd,this._writingBuf);e(null,t)}catch(t){e(t)}else gs&&(this._writingBuf=Buffer.from(this._writingBuf)),j.write(this.fd,this._writingBuf,e)}function ce(e){if(e.fd===-1){e.once("ready",ce.bind(null,e));return}e._periodicFlushTimer!==void 0&&clearInterval(e._periodicFlushTimer),e.destroyed=!0,e._bufs=[],e._lens=[],as(typeof e.fd=="number",`sonic.fd must be a number, got ${typeof e.fd}`);try{j.fsync(e.fd,t)}catch{}function t(){e.fd!==1&&e.fd!==2?j.close(e.fd,r):r()}function r(n){if(n){e.emit("error",n);return}e._ending&&!e._writing&&e.emit("finish"),e.emit("close")}}C.SonicBoom=C;C.default=C;gr.exports=C});var Me=x((Qf,_r)=>{"use strict";var N={exit:[],beforeExit:[]},pr={exit:$s,beforeExit:As},H;function vs(){H===void 0&&(H=new FinalizationRegistry(js))}function Ls(e){N[e].length>0||process.on(e,pr[e])}function br(e){N[e].length>0||(process.removeListener(e,pr[e]),N.exit.length===0&&N.beforeExit.length===0&&(H=void 0))}function $s(){wr("exit")}function As(){wr("beforeExit")}function wr(e){for(let t of N[e]){let r=t.deref(),n=t.fn;r!==void 0&&n(r,e)}N[e]=[]}function js(e){for(let t of["exit","beforeExit"]){let r=N[t].indexOf(e);N[t].splice(r,r+1),br(t)}}function Sr(e,t,r){if(t===void 0)throw new Error("the object can't be undefined");Ls(e);let n=new WeakRef(t);n.fn=r,vs(),H.register(t,n),N[e].push(n)}function Ts(e,t){Sr("exit",e,t)}function ks(e,t){Sr("beforeExit",e,t)}function Rs(e){if(H!==void 0){H.unregister(e);for(let t of["exit","beforeExit"])N[t]=N[t].filter(r=>{let n=r.deref();return n&&n!==e}),br(t)}}_r.exports={register:Ts,registerBeforeExit:ks,unregister:Rs}});var Er=x((Zf,Bs)=>{Bs.exports={name:"thread-stream",version:"3.1.0",description:"A streaming way to send data to a Node.js Worker Thread",main:"index.js",types:"index.d.ts",dependencies:{"real-require":"^0.2.0"},devDependencies:{"@types/node":"^20.1.0","@types/tap":"^15.0.0","@yao-pkg/pkg":"^5.11.5",desm:"^1.3.0",fastbench:"^1.0.1",husky:"^9.0.6","pino-elasticsearch":"^8.0.0","sonic-boom":"^4.0.1",standard:"^17.0.0",tap:"^16.2.0","ts-node":"^10.8.0",typescript:"^5.3.2","why-is-node-running":"^2.2.2"},scripts:{build:"tsc --noEmit",test:'standard && npm run build && npm run transpile && tap "test/**/*.test.*js" && tap --ts test/*.test.*ts',"test:ci":"standard && npm run transpile && npm run test:ci:js && npm run test:ci:ts","test:ci:js":'tap --no-check-coverage --timeout=120 --coverage-report=lcovonly "test/**/*.test.*js"',"test:ci:ts":'tap --ts --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*ts"',"test:yarn":'npm run transpile && tap "test/**/*.test.js" --no-check-coverage',transpile:"sh ./test/ts/transpile.sh",prepare:"husky install"},standard:{ignore:["test/ts/**/*","test/syntax-error.mjs"]},repository:{type:"git",url:"git+https://github.com/mcollina/thread-stream.git"},keywords:["worker","thread","threads","stream"],author:"Matteo Collina <hello@matteocollina.com>",license:"MIT",bugs:{url:"https://github.com/mcollina/thread-stream/issues"},homepage:"https://github.com/mcollina/thread-stream#readme"}});var xr=x((eu,Or)=>{"use strict";function Is(e,t,r,n,i){let o=Date.now()+n,f=Atomics.load(e,t);if(f===r){i(null,"ok");return}let u=f,d=y=>{Date.now()>o?i(null,"timed-out"):setTimeout(()=>{u=f,f=Atomics.load(e,t),f===u?d(y>=1e3?1e3:y*2):f===r?i(null,"ok"):i(null,"not-equal")},y)};d(1)}function qs(e,t,r,n,i){let o=Date.now()+n,f=Atomics.load(e,t);if(f!==r){i(null,"ok");return}let u=d=>{Date.now()>o?i(null,"timed-out"):setTimeout(()=>{f=Atomics.load(e,t),f!==r?i(null,"ok"):u(d>=1e3?1e3:d*2)},d)};u(1)}Or.exports={wait:Is,waitDiff:qs}});var Lr=x((tu,vr)=>{"use strict";vr.exports={WRITE_INDEX:4,READ_INDEX:8}});var kr=x((ru,Tr)=>{"use strict";var{version:Cs}=Er(),{EventEmitter:Ns}=require("events"),{Worker:Ds}=require("worker_threads"),{join:Ps}=require("path"),{pathToFileURL:zs}=require("url"),{wait:Ws}=xr(),{WRITE_INDEX:R,READ_INDEX:D}=Lr(),Ms=require("buffer"),Fs=require("assert"),a=Symbol("kImpl"),Vs=Ms.constants.MAX_STRING_LENGTH,Z=class{constructor(t){this._value=t}deref(){return this._value}},he=class{register(){}unregister(){}},Ks=process.env.NODE_V8_COVERAGE?he:global.FinalizationRegistry||he,Js=process.env.NODE_V8_COVERAGE?Z:global.WeakRef||Z,$r=new Ks(e=>{e.exited||e.terminate()});function Us(e,t){let{filename:r,workerData:n}=t,o=("__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{})["thread-stream-worker"]||Ps(__dirname,"lib","worker.js"),f=new Ds(o,{...t.workerOpts,trackUnmanagedFds:!1,workerData:{filename:r.indexOf("file://")===0?r:zs(r).href,dataBuf:e[a].dataBuf,stateBuf:e[a].stateBuf,workerData:{$context:{threadStreamVersion:Cs},...n}}});return f.stream=new Z(e),f.on("message",Gs),f.on("exit",jr),$r.register(e,f),f}function Ar(e){Fs(!e[a].sync),e[a].needDrain&&(e[a].needDrain=!1,e.emit("drain"))}function ae(e){let t=Atomics.load(e[a].state,R),r=e[a].data.length-t;if(r>0){if(e[a].buf.length===0){e[a].flushing=!1,e[a].ending?Ue(e):e[a].needDrain&&process.nextTick(Ar,e);return}let n=e[a].buf.slice(0,r),i=Buffer.byteLength(n);i<=r?(e[a].buf=e[a].buf.slice(r),de(e,n,ae.bind(null,e))):e.flush(()=>{if(!e.destroyed){for(Atomics.store(e[a].state,D,0),Atomics.store(e[a].state,R,0);i>e[a].data.length;)r=r/2,n=e[a].buf.slice(0,r),i=Buffer.byteLength(n);e[a].buf=e[a].buf.slice(r),de(e,n,ae.bind(null,e))}})}else if(r===0){if(t===0&&e[a].buf.length===0)return;e.flush(()=>{Atomics.store(e[a].state,D,0),Atomics.store(e[a].state,R,0),ae(e)})}else P(e,new Error("overwritten"))}function Gs(e){let t=this.stream.deref();if(t===void 0){this.exited=!0,this.terminate();return}switch(e.code){case"READY":this.stream=new Js(t),t.flush(()=>{t[a].ready=!0,t.emit("ready")});break;case"ERROR":P(t,e.err);break;case"EVENT":Array.isArray(e.args)?t.emit(e.name,...e.args):t.emit(e.name,e.args);break;case"WARNING":process.emitWarning(e.err);break;default:P(t,new Error("this should not happen: "+e.code))}}function jr(e){let t=this.stream.deref();t!==void 0&&($r.unregister(t),t.worker.exited=!0,t.worker.off("exit",jr),P(t,e!==0?new Error("the worker thread exited"):null))}var Ve=class extends Ns{constructor(t={}){if(super(),t.bufferSize<4)throw new Error("bufferSize must at least fit a 4-byte utf-8 char");this[a]={},this[a].stateBuf=new SharedArrayBuffer(128),this[a].state=new Int32Array(this[a].stateBuf),this[a].dataBuf=new SharedArrayBuffer(t.bufferSize||4*1024*1024),this[a].data=Buffer.from(this[a].dataBuf),this[a].sync=t.sync||!1,this[a].ending=!1,this[a].ended=!1,this[a].needDrain=!1,this[a].destroyed=!1,this[a].flushing=!1,this[a].ready=!1,this[a].finished=!1,this[a].errored=null,this[a].closed=!1,this[a].buf="",this.worker=Us(this,t),this.on("message",(r,n)=>{this.worker.postMessage(r,n)})}write(t){if(this[a].destroyed)return Ke(this,new Error("the worker has exited")),!1;if(this[a].ending)return Ke(this,new Error("the worker is ending")),!1;if(this[a].flushing&&this[a].buf.length+t.length>=Vs)try{Fe(this),this[a].flushing=!0}catch(r){return P(this,r),!1}if(this[a].buf+=t,this[a].sync)try{return Fe(this),!0}catch(r){return P(this,r),!1}return this[a].flushing||(this[a].flushing=!0,setImmediate(ae,this)),this[a].needDrain=this[a].data.length-this[a].buf.length-Atomics.load(this[a].state,R)<=0,!this[a].needDrain}end(){this[a].destroyed||(this[a].ending=!0,Ue(this))}flush(t){if(this[a].destroyed){typeof t=="function"&&process.nextTick(t,new Error("the worker has exited"));return}let r=Atomics.load(this[a].state,R);Ws(this[a].state,D,r,1/0,(n,i)=>{if(n){P(this,n),process.nextTick(t,n);return}if(i==="not-equal"){this.flush(t);return}process.nextTick(t)})}flushSync(){this[a].destroyed||(Fe(this),Je(this))}unref(){this.worker.unref()}ref(){this.worker.ref()}get ready(){return this[a].ready}get destroyed(){return this[a].destroyed}get closed(){return this[a].closed}get writable(){return!this[a].destroyed&&!this[a].ending}get writableEnded(){return this[a].ending}get writableFinished(){return this[a].finished}get writableNeedDrain(){return this[a].needDrain}get writableObjectMode(){return!1}get writableErrored(){return this[a].errored}};function Ke(e,t){setImmediate(()=>{e.emit("error",t)})}function P(e,t){e[a].destroyed||(e[a].destroyed=!0,t&&(e[a].errored=t,Ke(e,t)),e.worker.exited?setImmediate(()=>{e[a].closed=!0,e.emit("close")}):e.worker.terminate().catch(()=>{}).then(()=>{e[a].closed=!0,e.emit("close")}))}function de(e,t,r){let n=Atomics.load(e[a].state,R),i=Buffer.byteLength(t);return e[a].data.write(t,n),Atomics.store(e[a].state,R,n+i),Atomics.notify(e[a].state,R),r(),!0}function Ue(e){if(!(e[a].ended||!e[a].ending||e[a].flushing)){e[a].ended=!0;try{e.flushSync();let t=Atomics.load(e[a].state,D);Atomics.store(e[a].state,R,-1),Atomics.notify(e[a].state,R);let r=0;for(;t!==-1;){if(Atomics.wait(e[a].state,D,t,1e3),t=Atomics.load(e[a].state,D),t===-2){P(e,new Error("end() failed"));return}if(++r===10){P(e,new Error("end() took too long (10s)"));return}}process.nextTick(()=>{e[a].finished=!0,e.emit("finish")})}catch(t){P(e,t)}}}function Fe(e){let t=()=>{e[a].ending?Ue(e):e[a].needDrain&&process.nextTick(Ar,e)};for(e[a].flushing=!1;e[a].buf.length!==0;){let r=Atomics.load(e[a].state,R),n=e[a].data.length-r;if(n===0){Je(e),Atomics.store(e[a].state,D,0),Atomics.store(e[a].state,R,0);continue}else if(n<0)throw new Error("overwritten");let i=e[a].buf.slice(0,n),o=Buffer.byteLength(i);if(o<=n)e[a].buf=e[a].buf.slice(n),de(e,i,t);else{for(Je(e),Atomics.store(e[a].state,D,0),Atomics.store(e[a].state,R,0);o>e[a].buf.length;)n=n/2,i=e[a].buf.slice(0,n),o=Buffer.byteLength(i);e[a].buf=e[a].buf.slice(n),de(e,i,t)}}}function Je(e){if(e[a].flushing)throw new Error("unable to flush while flushing");let t=Atomics.load(e[a].state,R),r=0;for(;;){let n=Atomics.load(e[a].state,D);if(n===-2)throw Error("_flushSync failed");if(n!==t)Atomics.wait(e[a].state,D,n,1e3);else break;if(++r===10)throw new Error("_flushSync took too long (10s)")}}Tr.exports=Ve});var Xe=x((nu,Rr)=>{"use strict";var{createRequire:Hs}=require("module"),Xs=Te(),{join:Ge,isAbsolute:Ys,sep:Qs}=require("node:path"),Zs=Pe(),He=Me(),eo=kr();function to(e){He.register(e,no),He.registerBeforeExit(e,io),e.on("close",function(){He.unregister(e)})}function ro(e,t,r,n){let i=new eo({filename:e,workerData:t,workerOpts:r,sync:n});i.on("ready",o),i.on("close",function(){process.removeListener("exit",f)}),process.on("exit",f);function o(){process.removeListener("exit",f),i.unref(),r.autoEnd!==!1&&to(i)}function f(){i.closed||(i.flushSync(),Zs(100),i.end())}return i}function no(e){e.ref(),e.flushSync(),e.end(),e.once("close",function(){e.unref()})}function io(e){e.flushSync()}function so(e){let{pipeline:t,targets:r,levels:n,dedupe:i,worker:o={},caller:f=Xs(),sync:u=!1}=e,d={...e.options},y=typeof f=="string"?[f]:f,h="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{},l=e.target;if(l&&r)throw new Error("only one of target or targets can be specified");return r?(l=h["pino-worker"]||Ge(__dirname,"worker.js"),d.targets=r.filter(c=>c.target).map(c=>({...c,target:p(c.target)})),d.pipelines=r.filter(c=>c.pipeline).map(c=>c.pipeline.map(s=>({...s,level:c.level,target:p(s.target)})))):t&&(l=h["pino-worker"]||Ge(__dirname,"worker.js"),d.pipelines=[t.map(c=>({...c,target:p(c.target)}))]),n&&(d.levels=n),i&&(d.dedupe=i),d.pinoWillSendConfig=!0,ro(p(l),d,o,u);function p(c){if(c=h[c]||c,Ys(c)||c.indexOf("file://")===0)return c;if(c==="pino/file")return Ge(__dirname,"..","file.js");let s;for(let m of y)try{let g=m==="node:repl"?process.cwd()+Qs:m;s=Hs(g).resolve(c);break}catch{continue}if(!s)throw new Error(`unable to determine transport target for "${c}"`);return s}}Rr.exports=so});var me=x((iu,Fr)=>{"use strict";var Br=fr(),{mapHttpRequest:oo,mapHttpResponse:lo}=je(),Qe=mr(),Ir=Me(),{lsCacheSym:fo,chindingsSym:Nr,writeSym:qr,serializersSym:Dr,formatOptsSym:Cr,endSym:uo,stringifiersSym:Pr,stringifySym:zr,stringifySafeSym:Ze,wildcardFirstSym:Wr,nestedKeySym:co,formattersSym:Mr,messageKeySym:ao,errorKeySym:ho,nestedKeyStrSym:yo,msgPrefixSym:ye}=G(),{isMainThread:go}=require("worker_threads"),mo=Xe();function X(){}function po(e,t){if(!t)return r;return function(...i){t.call(this,i,r,e)};function r(n,...i){if(typeof n=="object"){let o=n;n!==null&&(n.method&&n.headers&&n.socket?n=oo(n):typeof n.setHeader=="function"&&(n=lo(n)));let f;o===null&&i.length===0?f=[null]:(o=i.shift(),f=i),typeof this[ye]=="string"&&o!==void 0&&o!==null&&(o=this[ye]+o),this[qr](n,Br(o,f,this[Cr]),e)}else{let o=n===void 0?i.shift():n;typeof this[ye]=="string"&&o!==void 0&&o!==null&&(o=this[ye]+o),this[qr](null,Br(o,i,this[Cr]),e)}}}function Ye(e){let t="",r=0,n=!1,i=255,o=e.length;if(o>100)return JSON.stringify(e);for(var f=0;f<o&&i>=32;f++)i=e.charCodeAt(f),(i===34||i===92)&&(t+=e.slice(r,f)+"\\",r=f,n=!0);return n?t+=e.slice(r):t=e,i<32?JSON.stringify(e):'"'+t+'"'}function bo(e,t,r,n){let i=this[zr],o=this[Ze],f=this[Pr],u=this[uo],d=this[Nr],y=this[Dr],h=this[Mr],l=this[ao],p=this[ho],c=this[fo][r]+n;c=c+d;let s;h.log&&(e=h.log(e));let m=f[Wr],g="";for(let b in e)if(s=e[b],Object.prototype.hasOwnProperty.call(e,b)&&s!==void 0){y[b]?s=y[b](s):b===p&&y.err&&(s=y.err(s));let w=f[b]||m;switch(typeof s){case"undefined":case"function":continue;case"number":Number.isFinite(s)===!1&&(s=null);case"boolean":w&&(s=w(s));break;case"string":s=(w||Ye)(s);break;default:s=(w||i)(s,o)}if(s===void 0)continue;let _=Ye(b);g+=","+_+":"+s}let S="";if(t!==void 0){s=y[l]?y[l](t):t;let b=f[l]||m;switch(typeof s){case"function":break;case"number":Number.isFinite(s)===!1&&(s=null);case"boolean":b&&(s=b(s)),S=',"'+l+'":'+s;break;case"string":s=(b||Ye)(s),S=',"'+l+'":'+s;break;default:s=(b||i)(s,o),S=',"'+l+'":'+s}}return this[co]&&g?c+this[yo]+g.slice(1)+"}"+S+u:c+g+S+u}function wo(e,t){let r,n=e[Nr],i=e[zr],o=e[Ze],f=e[Pr],u=f[Wr],d=e[Dr],y=e[Mr].bindings;t=y(t);for(let h in t)if(r=t[h],(h!=="level"&&h!=="serializers"&&h!=="formatters"&&h!=="customLevels"&&t.hasOwnProperty(h)&&r!==void 0)===!0){if(r=d[h]?d[h](r):r,r=(f[h]||u||i)(r,o),r===void 0)continue;n+=',"'+h+'":'+r}return n}function So(e){return e.write!==e.constructor.prototype.write}function ge(e){let t=new Qe(e);return t.on("error",r),!e.sync&&go&&(Ir.register(t,_o),t.on("close",function(){Ir.unregister(t)})),t;function r(n){if(n.code==="EPIPE"){t.write=X,t.end=X,t.flushSync=X,t.destroy=X;return}t.removeListener("error",r),t.emit("error",n)}}function _o(e,t){e.destroyed||(t==="beforeExit"?(e.flush(),e.on("drain",function(){e.end()})):e.flushSync())}function Eo(e){return function(r,n,i={},o){if(typeof i=="string")o=ge({dest:i}),i={};else if(typeof o=="string"){if(i&&i.transport)throw Error("only one of option.transport or stream can be specified");o=ge({dest:o})}else if(i instanceof Qe||i.writable||i._writableState)o=i,i={};else if(i.transport){if(i.transport instanceof Qe||i.transport.writable||i.transport._writableState)throw Error("option.transport do not allow stream, please pass to option directly. e.g. pino(transport)");if(i.transport.targets&&i.transport.targets.length&&i.formatters&&typeof i.formatters.level=="function")throw Error("option.transport.targets do not allow custom level formatters");let d;i.customLevels&&(d=i.useOnlyCustomLevels?i.customLevels:Object.assign({},i.levels,i.customLevels)),o=mo({caller:n,...i.transport,levels:d})}if(i=Object.assign({},e,i),i.serializers=Object.assign({},e.serializers,i.serializers),i.formatters=Object.assign({},e.formatters,i.formatters),i.prettyPrint)throw new Error("prettyPrint option is no longer supported, see the pino-pretty package (https://github.com/pinojs/pino-pretty)");let{enabled:f,onChild:u}=i;return f===!1&&(i.level="silent"),u||(i.onChild=X),o||(So(process.stdout)?o=process.stdout:o=ge({fd:process.stdout.fd||1})),{opts:i,stream:o}}}function Oo(e,t){try{return JSON.stringify(e)}catch{try{return(t||this[Ze])(e)}catch{return'"[unable to serialize, circular reference is too complex to analyze]"'}}}function xo(e,t,r){return{level:e,bindings:t,log:r}}function vo(e){let t=Number(e);return typeof e=="string"&&Number.isFinite(t)?t:e===void 0?1:e}Fr.exports={noop:X,buildSafeSonicBoom:ge,asChindings:wo,asJson:bo,genLog:po,createArgsNormalizer:Eo,stringify:Oo,buildFormatters:xo,normalizeDestFileDescriptor:vo}});var pe=x((su,Vr)=>{var Lo={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},$o={ASC:"ASC",DESC:"DESC"};Vr.exports={DEFAULT_LEVELS:Lo,SORTING_ORDER:$o}});var rt=x((ou,Gr)=>{"use strict";var{lsCacheSym:Ao,levelValSym:et,useOnlyCustomLevelsSym:jo,streamSym:To,formattersSym:ko,hooksSym:Ro,levelCompSym:Kr}=G(),{noop:Bo,genLog:V}=me(),{DEFAULT_LEVELS:z,SORTING_ORDER:Jr}=pe(),Ur={fatal:e=>{let t=V(z.fatal,e);return function(...r){let n=this[To];if(t.call(this,...r),typeof n.flushSync=="function")try{n.flushSync()}catch{}}},error:e=>V(z.error,e),warn:e=>V(z.warn,e),info:e=>V(z.info,e),debug:e=>V(z.debug,e),trace:e=>V(z.trace,e)},tt=Object.keys(z).reduce((e,t)=>(e[z[t]]=t,e),{}),Io=Object.keys(tt).reduce((e,t)=>(e[t]='{"level":'+Number(t),e),{});function qo(e){let t=e[ko].level,{labels:r}=e.levels,n={};for(let i in r){let o=t(r[i],Number(i));n[i]=JSON.stringify(o).slice(0,-1)}return e[Ao]=n,e}function Co(e,t){if(t)return!1;switch(e){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function No(e){let{labels:t,values:r}=this.levels;if(typeof e=="number"){if(t[e]===void 0)throw Error("unknown level value"+e);e=t[e]}if(r[e]===void 0)throw Error("unknown level "+e);let n=this[et],i=this[et]=r[e],o=this[jo],f=this[Kr],u=this[Ro].logMethod;for(let d in r){if(f(r[d],i)===!1){this[d]=Bo;continue}this[d]=Co(d,o)?Ur[d](u):V(r[d],u)}this.emit("level-change",e,i,t[n],n,this)}function Do(e){let{levels:t,levelVal:r}=this;return t&&t.labels?t.labels[r]:""}function Po(e){let{values:t}=this.levels,r=t[e];return r!==void 0&&this[Kr](r,this[et])}function zo(e,t,r){return e===Jr.DESC?t<=r:t>=r}function Wo(e){return typeof e=="string"?zo.bind(null,e):e}function Mo(e=null,t=!1){let r=e?Object.keys(e).reduce((o,f)=>(o[e[f]]=f,o),{}):null,n=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),t?null:tt,r),i=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),t?null:z,e);return{labels:n,values:i}}function Fo(e,t,r){if(typeof e=="number"){if(![].concat(Object.keys(t||{}).map(o=>t[o]),r?[]:Object.keys(tt).map(o=>+o),1/0).includes(e))throw Error(`default level:${e} must be included in custom levels`);return}let n=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),r?null:z,t);if(!(e in n))throw Error(`default level:${e} must be included in custom levels`)}function Vo(e,t){let{labels:r,values:n}=e;for(let i in t){if(i in n)throw Error("levels cannot be overridden");if(t[i]in r)throw Error("pre-existing level values cannot be used for new levels")}}function Ko(e){if(typeof e!="function"&&!(typeof e=="string"&&Object.values(Jr).includes(e)))throw new Error('Levels comparison should be one of "ASC", "DESC" or "function" type')}Gr.exports={initialLsCache:Io,genLsCache:qo,levelMethods:Ur,getLevel:Do,setLevel:No,isLevelEnabled:Po,mappings:Mo,assertNoLevelCollisions:Vo,assertDefaultLevelFound:Fo,genLevelComparison:Wo,assertLevelComparison:Ko}});var nt=x((lu,Hr)=>{"use strict";Hr.exports={version:"9.7.0"}});var ln=x((uu,on)=>{"use strict";var{EventEmitter:Jo}=require("node:events"),{lsCacheSym:Uo,levelValSym:Go,setLevelSym:st,getLevelSym:Xr,chindingsSym:ot,parsedChindingsSym:Ho,mixinSym:Xo,asJsonSym:tn,writeSym:Yo,mixinMergeStrategySym:Qo,timeSym:Zo,timeSliceIndexSym:el,streamSym:rn,serializersSym:K,formattersSym:it,errorKeySym:tl,messageKeySym:rl,useOnlyCustomLevelsSym:nl,needsMetadataGsym:il,redactFmtSym:sl,stringifySym:ol,formatOptsSym:ll,stringifiersSym:fl,msgPrefixSym:Yr,hooksSym:ul}=G(),{getLevel:cl,setLevel:al,isLevelEnabled:hl,mappings:dl,initialLsCache:yl,genLsCache:gl,assertNoLevelCollisions:ml}=rt(),{asChindings:nn,asJson:pl,buildFormatters:Qr,stringify:Zr}=me(),{version:bl}=nt(),wl=Ne(),Sl=class{},sn={constructor:Sl,child:_l,bindings:El,setBindings:Ol,flush:$l,isLevelEnabled:hl,version:bl,get level(){return this[Xr]()},set level(e){this[st](e)},get levelVal(){return this[Go]},set levelVal(e){throw Error("levelVal is read-only")},[Uo]:yl,[Yo]:vl,[tn]:pl,[Xr]:cl,[st]:al};Object.setPrototypeOf(sn,Jo.prototype);on.exports=function(){return Object.create(sn)};var en=e=>e;function _l(e,t){if(!e)throw Error("missing bindings for child Pino");t=t||{};let r=this[K],n=this[it],i=Object.create(this);if(t.hasOwnProperty("serializers")===!0){i[K]=Object.create(null);for(let h in r)i[K][h]=r[h];let d=Object.getOwnPropertySymbols(r);for(var o=0;o<d.length;o++){let h=d[o];i[K][h]=r[h]}for(let h in t.serializers)i[K][h]=t.serializers[h];let y=Object.getOwnPropertySymbols(t.serializers);for(var f=0;f<y.length;f++){let h=y[f];i[K][h]=t.serializers[h]}}else i[K]=r;if(t.hasOwnProperty("formatters")){let{level:d,bindings:y,log:h}=t.formatters;i[it]=Qr(d||n.level,y||en,h||n.log)}else i[it]=Qr(n.level,en,n.log);if(t.hasOwnProperty("customLevels")===!0&&(ml(this.levels,t.customLevels),i.levels=dl(t.customLevels,i[nl]),gl(i)),typeof t.redact=="object"&&t.redact!==null||Array.isArray(t.redact)){i.redact=t.redact;let d=wl(i.redact,Zr),y={stringify:d[sl]};i[ol]=Zr,i[fl]=d,i[ll]=y}typeof t.msgPrefix=="string"&&(i[Yr]=(this[Yr]||"")+t.msgPrefix),i[ot]=nn(i,e);let u=t.level||this.level;return i[st](u),this.onChild(i),i}function El(){let t=`{${this[ot].substr(1)}}`,r=JSON.parse(t);return delete r.pid,delete r.hostname,r}function Ol(e){let t=nn(this,e);this[ot]=t,delete this[Ho]}function xl(e,t){return Object.assign(t,e)}function vl(e,t,r){let n=this[Zo](),i=this[Xo],o=this[tl],f=this[rl],u=this[Qo]||xl,d,y=this[ul].streamWrite;e==null?d={}:e instanceof Error?(d={[o]:e},t===void 0&&(t=e.message)):(d=e,t===void 0&&e[f]===void 0&&e[o]&&(t=e[o].message)),i&&(d=u(d,i(d,r,this)));let h=this[tn](d,t,r,n),l=this[rn];l[il]===!0&&(l.lastLevel=r,l.lastObj=d,l.lastMsg=t,l.lastTime=n.slice(this[el]),l.lastLogger=this),l.write(y?y(h):h)}function Ll(){}function $l(e){if(e!=null&&typeof e!="function")throw Error("callback must be a function");let t=this[rn];typeof t.flush=="function"?t.flush(e||Ll):e&&e()}});var an=x((ct,cn)=>{"use strict";var{hasOwnProperty:ee}=Object.prototype,U=ut();U.configure=ut;U.stringify=U;U.default=U;ct.stringify=U;ct.configure=ut;cn.exports=U;var Al=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function M(e){return e.length<5e3&&!Al.test(e)?`"${e}"`:JSON.stringify(e)}function lt(e,t){if(e.length>200||t)return e.sort(t);for(let r=1;r<e.length;r++){let n=e[r],i=r;for(;i!==0&&e[i-1]>n;)e[i]=e[i-1],i--;e[i]=n}return e}var jl=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function ft(e){return jl.call(e)!==void 0&&e.length!==0}function fn(e,t,r){e.length<r&&(r=e.length);let n=t===","?"":" ",i=`"0":${n}${e[0]}`;for(let o=1;o<r;o++)i+=`${t}"${o}":${n}${e[o]}`;return i}function Tl(e){if(ee.call(e,"circularValue")){let t=e.circularValue;if(typeof t=="string")return`"${t}"`;if(t==null)return t;if(t===Error||t===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function kl(e){let t;if(ee.call(e,"deterministic")&&(t=e.deterministic,typeof t!="boolean"&&typeof t!="function"))throw new TypeError('The "deterministic" argument must be of type boolean or comparator function');return t===void 0?!0:t}function Rl(e,t){let r;if(ee.call(e,t)&&(r=e[t],typeof r!="boolean"))throw new TypeError(`The "${t}" argument must be of type boolean`);return r===void 0?!0:r}function un(e,t){let r;if(ee.call(e,t)){if(r=e[t],typeof r!="number")throw new TypeError(`The "${t}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${t}" argument must be an integer`);if(r<1)throw new RangeError(`The "${t}" argument must be >= 1`)}return r===void 0?1/0:r}function J(e){return e===1?"1 item":`${e} items`}function Bl(e){let t=new Set;for(let r of e)(typeof r=="string"||typeof r=="number")&&t.add(String(r));return t}function Il(e){if(ee.call(e,"strict")){let t=e.strict;if(typeof t!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(t)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function ut(e){e={...e};let t=Il(e);t&&(e.bigint===void 0&&(e.bigint=!1),"circularValue"in e||(e.circularValue=Error));let r=Tl(e),n=Rl(e,"bigint"),i=kl(e),o=typeof i=="function"?i:void 0,f=un(e,"maximumDepth"),u=un(e,"maximumBreadth");function d(c,s,m,g,S,b){let w=s[c];switch(typeof w=="object"&&w!==null&&typeof w.toJSON=="function"&&(w=w.toJSON(c)),w=g.call(s,c,w),typeof w){case"string":return M(w);case"object":{if(w===null)return"null";if(m.indexOf(w)!==-1)return r;let _="",O=",",v=b;if(Array.isArray(w)){if(w.length===0)return"[]";if(f<m.length+1)return'"[Array]"';m.push(w),S!==""&&(b+=S,_+=`
${b}`,O=`,
${b}`);let T=Math.min(w.length,u),B=0;for(;B<T-1;B++){let F=d(String(B),w,m,g,S,b);_+=F!==void 0?F:"null",_+=O}let I=d(String(B),w,m,g,S,b);if(_+=I!==void 0?I:"null",w.length-1>u){let F=w.length-u-1;_+=`${O}"... ${J(F)} not stringified"`}return S!==""&&(_+=`
${v}`),m.pop(),`[${_}]`}let L=Object.keys(w),$=L.length;if($===0)return"{}";if(f<m.length+1)return'"[Object]"';let E="",A="";S!==""&&(b+=S,O=`,
${b}`,E=" ");let k=Math.min($,u);i&&!ft(w)&&(L=lt(L,o)),m.push(w);for(let T=0;T<k;T++){let B=L[T],I=d(B,w,m,g,S,b);I!==void 0&&(_+=`${A}${M(B)}:${E}${I}`,A=O)}if($>u){let T=$-u;_+=`${A}"...":${E}"${J(T)} not stringified"`,A=O}return S!==""&&A.length>1&&(_=`
${b}${_}
${v}`),m.pop(),`{${_}}`}case"number":return isFinite(w)?String(w):t?t(w):"null";case"boolean":return w===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(w);default:return t?t(w):void 0}}function y(c,s,m,g,S,b){switch(typeof s=="object"&&s!==null&&typeof s.toJSON=="function"&&(s=s.toJSON(c)),typeof s){case"string":return M(s);case"object":{if(s===null)return"null";if(m.indexOf(s)!==-1)return r;let w=b,_="",O=",";if(Array.isArray(s)){if(s.length===0)return"[]";if(f<m.length+1)return'"[Array]"';m.push(s),S!==""&&(b+=S,_+=`
${b}`,O=`,
${b}`);let $=Math.min(s.length,u),E=0;for(;E<$-1;E++){let k=y(String(E),s[E],m,g,S,b);_+=k!==void 0?k:"null",_+=O}let A=y(String(E),s[E],m,g,S,b);if(_+=A!==void 0?A:"null",s.length-1>u){let k=s.length-u-1;_+=`${O}"... ${J(k)} not stringified"`}return S!==""&&(_+=`
${w}`),m.pop(),`[${_}]`}m.push(s);let v="";S!==""&&(b+=S,O=`,
${b}`,v=" ");let L="";for(let $ of g){let E=y($,s[$],m,g,S,b);E!==void 0&&(_+=`${L}${M($)}:${v}${E}`,L=O)}return S!==""&&L.length>1&&(_=`
${b}${_}
${w}`),m.pop(),`{${_}}`}case"number":return isFinite(s)?String(s):t?t(s):"null";case"boolean":return s===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(s);default:return t?t(s):void 0}}function h(c,s,m,g,S){switch(typeof s){case"string":return M(s);case"object":{if(s===null)return"null";if(typeof s.toJSON=="function"){if(s=s.toJSON(c),typeof s!="object")return h(c,s,m,g,S);if(s===null)return"null"}if(m.indexOf(s)!==-1)return r;let b=S;if(Array.isArray(s)){if(s.length===0)return"[]";if(f<m.length+1)return'"[Array]"';m.push(s),S+=g;let E=`
${S}`,A=`,
${S}`,k=Math.min(s.length,u),T=0;for(;T<k-1;T++){let I=h(String(T),s[T],m,g,S);E+=I!==void 0?I:"null",E+=A}let B=h(String(T),s[T],m,g,S);if(E+=B!==void 0?B:"null",s.length-1>u){let I=s.length-u-1;E+=`${A}"... ${J(I)} not stringified"`}return E+=`
${b}`,m.pop(),`[${E}]`}let w=Object.keys(s),_=w.length;if(_===0)return"{}";if(f<m.length+1)return'"[Object]"';S+=g;let O=`,
${S}`,v="",L="",$=Math.min(_,u);ft(s)&&(v+=fn(s,O,u),w=w.slice(s.length),$-=s.length,L=O),i&&(w=lt(w,o)),m.push(s);for(let E=0;E<$;E++){let A=w[E],k=h(A,s[A],m,g,S);k!==void 0&&(v+=`${L}${M(A)}: ${k}`,L=O)}if(_>u){let E=_-u;v+=`${L}"...": "${J(E)} not stringified"`,L=O}return L!==""&&(v=`
${S}${v}
${b}`),m.pop(),`{${v}}`}case"number":return isFinite(s)?String(s):t?t(s):"null";case"boolean":return s===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(s);default:return t?t(s):void 0}}function l(c,s,m){switch(typeof s){case"string":return M(s);case"object":{if(s===null)return"null";if(typeof s.toJSON=="function"){if(s=s.toJSON(c),typeof s!="object")return l(c,s,m);if(s===null)return"null"}if(m.indexOf(s)!==-1)return r;let g="",S=s.length!==void 0;if(S&&Array.isArray(s)){if(s.length===0)return"[]";if(f<m.length+1)return'"[Array]"';m.push(s);let v=Math.min(s.length,u),L=0;for(;L<v-1;L++){let E=l(String(L),s[L],m);g+=E!==void 0?E:"null",g+=","}let $=l(String(L),s[L],m);if(g+=$!==void 0?$:"null",s.length-1>u){let E=s.length-u-1;g+=`,"... ${J(E)} not stringified"`}return m.pop(),`[${g}]`}let b=Object.keys(s),w=b.length;if(w===0)return"{}";if(f<m.length+1)return'"[Object]"';let _="",O=Math.min(w,u);S&&ft(s)&&(g+=fn(s,",",u),b=b.slice(s.length),O-=s.length,_=","),i&&(b=lt(b,o)),m.push(s);for(let v=0;v<O;v++){let L=b[v],$=l(L,s[L],m);$!==void 0&&(g+=`${_}${M(L)}:${$}`,_=",")}if(w>u){let v=w-u;g+=`${_}"...":"${J(v)} not stringified"`}return m.pop(),`{${g}}`}case"number":return isFinite(s)?String(s):t?t(s):"null";case"boolean":return s===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(s);default:return t?t(s):void 0}}function p(c,s,m){if(arguments.length>1){let g="";if(typeof m=="number"?g=" ".repeat(Math.min(m,10)):typeof m=="string"&&(g=m.slice(0,10)),s!=null){if(typeof s=="function")return d("",{"":c},[],s,g,"");if(Array.isArray(s))return y("",c,[],Bl(s),g,"")}if(g.length!==0)return h("",c,[],g,"")}return l("",c,[])}return p}});var yn=x((cu,dn)=>{"use strict";var at=Symbol.for("pino.metadata"),{DEFAULT_LEVELS:hn}=pe(),ql=hn.info;function Cl(e,t){let r=0;e=e||[],t=t||{dedupe:!1};let n=Object.create(hn);n.silent=1/0,t.levels&&typeof t.levels=="object"&&Object.keys(t.levels).forEach(l=>{n[l]=t.levels[l]});let i={write:o,add:d,emit:f,flushSync:u,end:y,minLevel:0,streams:[],clone:h,[at]:!0,streamLevels:n};return Array.isArray(e)?e.forEach(d,i):d.call(i,e),e=null,i;function o(l){let p,c=this.lastLevel,{streams:s}=this,m=0,g;for(let S=Dl(s.length,t.dedupe);zl(S,s.length,t.dedupe);S=Pl(S,t.dedupe))if(p=s[S],p.level<=c){if(m!==0&&m!==p.level)break;if(g=p.stream,g[at]){let{lastTime:b,lastMsg:w,lastObj:_,lastLogger:O}=this;g.lastLevel=c,g.lastTime=b,g.lastMsg=w,g.lastObj=_,g.lastLogger=O}g.write(l),t.dedupe&&(m=p.level)}else if(!t.dedupe)break}function f(...l){for(let{stream:p}of this.streams)typeof p.emit=="function"&&p.emit(...l)}function u(){for(let{stream:l}of this.streams)typeof l.flushSync=="function"&&l.flushSync()}function d(l){if(!l)return i;let p=typeof l.write=="function"||l.stream,c=l.write?l:l.stream;if(!p)throw Error("stream object needs to implement either StreamEntry or DestinationStream interface");let{streams:s,streamLevels:m}=this,g;typeof l.levelVal=="number"?g=l.levelVal:typeof l.level=="string"?g=m[l.level]:typeof l.level=="number"?g=l.level:g=ql;let S={stream:c,level:g,levelVal:void 0,id:r++};return s.unshift(S),s.sort(Nl),this.minLevel=s[0].level,i}function y(){for(let{stream:l}of this.streams)typeof l.flushSync=="function"&&l.flushSync(),l.end()}function h(l){let p=new Array(this.streams.length);for(let c=0;c<p.length;c++)p[c]={level:l,stream:this.streams[c].stream};return{write:o,add:d,minLevel:l,streams:p,clone:h,emit:f,flushSync:u,[at]:!0}}}function Nl(e,t){return e.level-t.level}function Dl(e,t){return t?e-1:0}function Pl(e,t){return t?e-1:e+1}function zl(e,t,r){return r?e>=0:e<t}dn.exports=Cl});var An=x((au,q)=>{function be(e){try{return require("path").join(`${process.cwd()}${require("path").sep}dist`.replace(/\\/g,"/"),e)}catch{return new Function("p","return new URL(p, import.meta.url).pathname")(e)}}globalThis.__bundlerPathsOverrides={...globalThis.__bundlerPathsOverrides||{},"thread-stream-worker":be("./thread-stream-worker.js"),"pino-worker":be("./pino-worker.js"),"pino/file":be("./pino-file.js"),"pino-pretty":be("./pino-pretty.js")};var Wl=require("node:os"),En=je(),Ml=Te(),Fl=Ne(),On=or(),Vl=ln(),xn=G(),{configure:Kl}=an(),{assertDefaultLevelFound:Jl,mappings:vn,genLsCache:Ul,genLevelComparison:Gl,assertLevelComparison:Hl}=rt(),{DEFAULT_LEVELS:Ln,SORTING_ORDER:Xl}=pe(),{createArgsNormalizer:Yl,asChindings:Ql,buildSafeSonicBoom:gn,buildFormatters:Zl,stringify:ht,normalizeDestFileDescriptor:mn,noop:ef}=me(),{version:tf}=nt(),{chindingsSym:pn,redactFmtSym:rf,serializersSym:bn,timeSym:nf,timeSliceIndexSym:sf,streamSym:of,stringifySym:wn,stringifySafeSym:dt,stringifiersSym:Sn,setLevelSym:lf,endSym:ff,formatOptsSym:uf,messageKeySym:cf,errorKeySym:af,nestedKeySym:hf,mixinSym:df,levelCompSym:yf,useOnlyCustomLevelsSym:gf,formattersSym:_n,hooksSym:mf,nestedKeyStrSym:pf,mixinMergeStrategySym:bf,msgPrefixSym:wf}=xn,{epochTime:$n,nullTime:Sf}=On,{pid:_f}=process,Ef=Wl.hostname(),Of=En.err,xf={level:"info",levelComparison:Xl.ASC,levels:Ln,messageKey:"msg",errorKey:"err",nestedKey:null,enabled:!0,base:{pid:_f,hostname:Ef},serializers:Object.assign(Object.create(null),{err:Of}),formatters:Object.assign(Object.create(null),{bindings(e){return e},level(e,t){return{level:t}}}),hooks:{logMethod:void 0,streamWrite:void 0},timestamp:$n,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1,depthLimit:5,edgeLimit:100},vf=Yl(xf),Lf=Object.assign(Object.create(null),En);function yt(...e){let t={},{opts:r,stream:n}=vf(t,Ml(),...e);r.level&&typeof r.level=="string"&&Ln[r.level.toLowerCase()]!==void 0&&(r.level=r.level.toLowerCase());let{redact:i,crlf:o,serializers:f,timestamp:u,messageKey:d,errorKey:y,nestedKey:h,base:l,name:p,level:c,customLevels:s,levelComparison:m,mixin:g,mixinMergeStrategy:S,useOnlyCustomLevels:b,formatters:w,hooks:_,depthLimit:O,edgeLimit:v,onChild:L,msgPrefix:$}=r,E=Kl({maximumDepth:O,maximumBreadth:v}),A=Zl(w.level,w.bindings,w.log),k=ht.bind({[dt]:E}),T=i?Fl(i,k):{},B=i?{stringify:T[rf]}:{stringify:k},I="}"+(o?`\r
`:`
`),F=Ql.bind(null,{[pn]:"",[bn]:f,[Sn]:T,[wn]:ht,[dt]:E,[_n]:A}),we="";l!==null&&(p===void 0?we=F(l):we=F(Object.assign({},l,{name:p})));let gt=u instanceof Function?u:u?$n:Sf,jn=gt().indexOf(":")+1;if(b&&!s)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(g&&typeof g!="function")throw Error(`Unknown mixin type "${typeof g}" - expected "function"`);if($&&typeof $!="string")throw Error(`Unknown msgPrefix type "${typeof $}" - expected "string"`);Jl(c,s,b);let mt=vn(s,b);typeof n.emit=="function"&&n.emit("message",{code:"PINO_CONFIG",config:{levels:mt,messageKey:d,errorKey:y}}),Hl(m);let Tn=Gl(m);return Object.assign(t,{levels:mt,[yf]:Tn,[gf]:b,[of]:n,[nf]:gt,[sf]:jn,[wn]:ht,[dt]:E,[Sn]:T,[ff]:I,[uf]:B,[cf]:d,[af]:y,[hf]:h,[pf]:h?`,${JSON.stringify(h)}:{`:"",[bn]:f,[df]:g,[bf]:S,[pn]:we,[_n]:A,[mf]:_,silent:ef,onChild:L,[wf]:$}),Object.setPrototypeOf(t,Vl()),Ul(t),t[lf](c),t}q.exports=yt;q.exports.destination=(e=process.stdout.fd)=>typeof e=="object"?(e.dest=mn(e.dest||process.stdout.fd),gn(e)):gn({dest:mn(e),minLength:0});q.exports.transport=Xe();q.exports.multistream=yn();q.exports.levels=vn();q.exports.stdSerializers=Lf;q.exports.stdTimeFunctions=Object.assign({},On);q.exports.symbols=xn;q.exports.version=tf;q.exports.default=yt;q.exports.pino=yt});var $f=An(),{once:Af}=require("node:events");module.exports=async function(e={}){let t=Object.assign({},e,{dest:e.destination||1,sync:!1});delete t.destination;let r=$f.destination(t);return await Af(r,"ready"),r};
